<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.29.4">
    <meta name="project" content="LAP2 v0.1.0">

    <title>LAP2.Networking.Router â€” LAP2 v0.1.0</title>
    <link rel="stylesheet" href="dist/html-elixir-HHVY3JYD.css" />


    <script src="dist/handlebars.runtime-NWIB6V2M.js"></script>
    <script src="dist/handlebars.templates-XWGFFSCD.js"></script>
    <script src="dist/sidebar_items-08CB9D83.js"></script>

      <script src="docs_config.js"></script>

    <script async src="dist/html-JDI3AVDD.js"></script>


  </head>
  <body data-type="modules" class="page-module">
    <script>

      try {
        var settings = JSON.parse(localStorage.getItem('ex_doc:settings') || '{}');

        if (settings.theme === 'dark' ||
           ((settings.theme === 'system' || settings.theme == null) &&
             window.matchMedia('(prefers-color-scheme: dark)').matches)
           ) {
          document.body.classList.add('dark')
        }
      } catch (error) { }
    </script>

<div class="main">

<button class="sidebar-button sidebar-toggle" aria-label="toggle sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<section class="sidebar">
  <form class="sidebar-search" action="search.html">
    <button type="submit" class="search-button" aria-label="Submit Search">
      <i class="ri-search-2-line" aria-hidden="true" title="Submit search"></i>
    </button>
    <button type="button" tabindex="-1" class="search-close-button" aria-label="Cancel Search">
      <i class="ri-close-line ri-lg" aria-hidden="true" title="Cancel search"></i>
    </button>
    <label class="search-label">
      <p class="sr-only">Search</p>
      <input name="q" type="text" class="search-input" placeholder="Search..." aria-label="Input your search terms" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
    </label>
  </form>

  <div class="autocomplete">
    <div class="autocomplete-results">
    </div>
  </div>

  <div class="sidebar-header">

      <a href="http://github.com/r1ghtwr0ng/lap2">
        <img src="assets/logo.png" alt="LAP2" class="sidebar-projectImage">
      </a>

    <div class="sidebar-projectDetails">
      <a href="http://github.com/r1ghtwr0ng/lap2" class="sidebar-projectName" translate="no">
LAP2
      </a>
      <div class="sidebar-projectVersion" translate="no">
        v0.1.0
      </div>
    </div>
    <ul class="sidebar-listNav">
      <li><a id="extras-list-link" href="#full-list">Pages</a></li>

        <li><a id="modules-list-link" href="#full-list">Modules</a></li>


    </ul>
  </div>

  <div class="gradient"></div>
  <ul id="full-list"></ul>
</section>

<section class="content">
  <output role="status" id="toast"></output>
  <div class="content-outer">
    <div id="content" class="content-inner">

<h1>
<button class="icon-action display-settings">
  <i class="ri-settings-3-line"></i>
  <span class="sr-only">Settings</span>
</button>


    <a href="https://github.com/r1ghtwr0ng/lap2/blob/main/lib/lap2/networking/router.ex#L1" title="View Source" class="icon-action" rel="help">
      <i class="ri-code-s-slash-line" aria-hidden="true"></i>
      <span class="sr-only">View Source</span>
    </a>

  <span translate="no">LAP2.Networking.Router</span> 
  <small class="app-vsn" translate="no">(LAP2 v0.1.0)</small>

</h1>


  <section id="moduledoc">
<p>Stores routing information, updates DHT and stores information for resolving addresses.
The actual functions for resolving the addresses, extracting keys, etc. is located in LAP2.Networking.Resolver
This module also stores connection information (anonymous paths and corresponidng crypto keys)
TODO have a look at a secure way of storing the keys</p>
  </section>


  <section id="summary" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#summary">
        <i class="ri-link-m" aria-hidden="true"></i>
        <span class="sr-only">Link to this section</span>
      </a>
      Summary
    </h1>
<div class="summary-functions summary">
  <h2>
    <a href="#functions">Functions</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#add_proxy_relays/3" translate="no">add_proxy_relays(proxy_seq, relays, name)</a>

      </div>

        <div class="summary-synopsis"><p>Accept and reply to a proxy request, update state accordingly.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#append_dht/3" translate="no">append_dht(lap2_addr, ip_addr, name)</a>

      </div>

        <div class="summary-synopsis"><p>Update the DHT with a new entry in the state</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#cache_query/4" translate="no">cache_query(query, new_qid, conn_id, name)</a>

      </div>

        <div class="summary-synopsis"><p>Cache an inbound TCP query so it can be used in the response.
This is a used by Introduction Points.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#child_spec/1" translate="no">child_spec(init_arg)</a>

      </div>

        <div class="summary-synopsis"><p>Returns a specification to start this module under a supervisor.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#clean_state/1" translate="no">clean_state(name)</a>

      </div>

        <div class="summary-synopsis"><p>Delete outdated entries from state.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#debug/1" translate="no">debug(name)</a>

      </div>

        <div class="summary-synopsis"><p>Inspect the router state.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#drop_test/2" translate="no">drop_test(route, drop_probab)</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#get_cached_query/2" translate="no">get_cached_query(qid, name)</a>

      </div>

        <div class="summary-synopsis"><p>Attempt to fetch a cached query from the router's cache.
If retrieved, it is deleted from the cache to conserve memory.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#get_dht/1" translate="no">get_dht(name)</a>

      </div>

        <div class="summary-synopsis"><p>Get the DHT from the state</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#get_neighbors/1" translate="no">get_neighbors(name)</a>

      </div>

        <div class="summary-synopsis"><p>Get a list of neighbors from the state</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#get_query_relay/2" translate="no">get_query_relay(query_id, name)</a>

      </div>

        <div class="summary-synopsis"><p>Retrieve the origin proxy sequence number for a given query ID.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#init/1" translate="no">init(config)</a>

      </div>

        <div class="summary-synopsis"><p>Initialise the router.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#route_inbound/3" translate="no">route_inbound(source, clove, name)</a>

      </div>

        <div class="summary-synopsis"><p>Route an inbound clove to the appropriate destination.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#route_outbound/3" translate="no">route_outbound(dest, clove, name)</a>

      </div>

        <div class="summary-synopsis"><p>Route data to the appropriate destination.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#route_outbound_discovery/3" translate="no">route_outbound_discovery(lap2_addr, clove, name)</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#route_tcp/2" translate="no">route_tcp(query, name)</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#save_query_relay/3" translate="no">save_query_relay(query_id, proxy_seq, name)</a>

      </div>

        <div class="summary-synopsis"><p>Save the origin relay sequence number for a given query ID.
This is done so responses can be routed back to the requesting node.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#start_link/1" translate="no">start_link(config)</a>

      </div>

        <div class="summary-synopsis"><p>Start the Router process.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#terminate/2" translate="no">terminate(reason, arg2)</a>

      </div>

        <div class="summary-synopsis"><p>Terminate the UDP server.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#update_config/2" translate="no">update_config(config, name)</a>

      </div>

        <div class="summary-synopsis"><p>Update the configuration in the state</p></div>

    </div>

</div>

  </section>


  <section id="functions" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#functions">
        <i class="ri-link-m" aria-hidden="true"></i>
        <span class="sr-only">Link to this section</span>
      </a>
Functions
    </h1>
    <div class="functions-list">
<section class="detail" id="add_proxy_relays/3">

  <div class="detail-header">
    <a href="#add_proxy_relays/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">add_proxy_relays(proxy_seq, relays, name)</h1>

      <a href="https://github.com/r1ghtwr0ng/lap2/blob/main/lib/lap2/networking/router.ex#L338" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> add_proxy_relays(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">non_neg_integer</a>(), [{<a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">non_neg_integer</a>()}], <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>()) ::
  :ok</pre>

      </div>

<p>Accept and reply to a proxy request, update state accordingly.</p>
  </section>
</section>
<section class="detail" id="append_dht/3">

  <div class="detail-header">
    <a href="#append_dht/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">append_dht(lap2_addr, ip_addr, name)</h1>

      <a href="https://github.com/r1ghtwr0ng/lap2/blob/main/lib/lap2/networking/router.ex#L346" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> append_dht(<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">binary</a>(), {<a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">non_neg_integer</a>()}, <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>()) :: :ok</pre>

      </div>

<p>Update the DHT with a new entry in the state</p>
  </section>
</section>
<section class="detail" id="cache_query/4">

  <div class="detail-header">
    <a href="#cache_query/4" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">cache_query(query, new_qid, conn_id, name)</h1>

      <a href="https://github.com/r1ghtwr0ng/lap2/blob/main/lib/lap2/networking/router.ex#L289" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> cache_query(Query.t(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">non_neg_integer</a>(), <a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>()) :: :ok</pre>

      </div>

<p>Cache an inbound TCP query so it can be used in the response.
This is a used by Introduction Points.</p>
  </section>
</section>
<section class="detail" id="child_spec/1">

  <div class="detail-header">
    <a href="#child_spec/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">child_spec(init_arg)</h1>

      <a href="https://github.com/r1ghtwr0ng/lap2/blob/main/lib/lap2/networking/router.ex#L8" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Returns a specification to start this module under a supervisor.</p><p>See <a href="https://hexdocs.pm/elixir/Supervisor.html"><code class="inline">Supervisor</code></a>.</p>
  </section>
</section>
<section class="detail" id="clean_state/1">

  <div class="detail-header">
    <a href="#clean_state/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">clean_state(name)</h1>

      <a href="https://github.com/r1ghtwr0ng/lap2/blob/main/lib/lap2/networking/router.ex#L370" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> clean_state(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>()) :: :ok</pre>

      </div>

<p>Delete outdated entries from state.</p>
  </section>
</section>
<section class="detail" id="debug/1">

  <div class="detail-header">
    <a href="#debug/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">debug(name)</h1>

      <a href="https://github.com/r1ghtwr0ng/lap2/blob/main/lib/lap2/networking/router.ex#L386" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> debug(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>()) :: :ok</pre>

      </div>

<p>Inspect the router state.</p>
  </section>
</section>
<section class="detail" id="drop_test/2">

  <div class="detail-header">
    <a href="#drop_test/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">drop_test(route, drop_probab)</h1>

      <a href="https://github.com/r1ghtwr0ng/lap2/blob/main/lib/lap2/networking/router.ex#L391" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> drop_test(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>() | <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">tuple</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">float</a>()) :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>() | <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">tuple</a>()</pre>

      </div>


  </section>
</section>
<section class="detail" id="get_cached_query/2">

  <div class="detail-header">
    <a href="#get_cached_query/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get_cached_query(qid, name)</h1>

      <a href="https://github.com/r1ghtwr0ng/lap2/blob/main/lib/lap2/networking/router.ex#L298" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> get_cached_query(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">non_neg_integer</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>()) ::
  {:ok, Query.t()} | {:error, <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>()}</pre>

      </div>

<p>Attempt to fetch a cached query from the router's cache.
If retrieved, it is deleted from the cache to conserve memory.</p>
  </section>
</section>
<section class="detail" id="get_dht/1">

  <div class="detail-header">
    <a href="#get_dht/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get_dht(name)</h1>

      <a href="https://github.com/r1ghtwr0ng/lap2/blob/main/lib/lap2/networking/router.ex#L378" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> get_dht(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>()) :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>()</pre>

      </div>

<p>Get the DHT from the state</p>
  </section>
</section>
<section class="detail" id="get_neighbors/1">

  <div class="detail-header">
    <a href="#get_neighbors/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get_neighbors(name)</h1>

      <a href="https://github.com/r1ghtwr0ng/lap2/blob/main/lib/lap2/networking/router.ex#L354" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> get_neighbors(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>()) :: [<a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>()]</pre>

      </div>

<p>Get a list of neighbors from the state</p>
  </section>
</section>
<section class="detail" id="get_query_relay/2">

  <div class="detail-header">
    <a href="#get_query_relay/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get_query_relay(query_id, name)</h1>

      <a href="https://github.com/r1ghtwr0ng/lap2/blob/main/lib/lap2/networking/router.ex#L315" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> get_query_relay(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">non_neg_integer</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>()) ::
  {:ok, <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">non_neg_integer</a>()} | {:error, <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>()}</pre>

      </div>

<p>Retrieve the origin proxy sequence number for a given query ID.</p>
  </section>
</section>
<section class="detail" id="init/1">

  <div class="detail-header">
    <a href="#init/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">init(config)</h1>

      <a href="https://github.com/r1ghtwr0ng/lap2/blob/main/lib/lap2/networking/router.ex#L27" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> init(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>()) :: {:ok, <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>()}</pre>

      </div>

<p>Initialise the router.</p>
  </section>
</section>
<section class="detail" id="route_inbound/3">

  <div class="detail-header">
    <a href="#route_inbound/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">route_inbound(source, clove, name)</h1>

      <a href="https://github.com/r1ghtwr0ng/lap2/blob/main/lib/lap2/networking/router.ex#L274" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> route_inbound({<a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">non_neg_integer</a>()}, Clove.t(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>()) :: :ok</pre>

      </div>

<p>Route an inbound clove to the appropriate destination.</p>
  </section>
</section>
<section class="detail" id="route_outbound/3">

  <div class="detail-header">
    <a href="#route_outbound/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">route_outbound(dest, clove, name)</h1>

      <a href="https://github.com/r1ghtwr0ng/lap2/blob/main/lib/lap2/networking/router.ex#L323" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> route_outbound({<a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">non_neg_integer</a>()}, Clove.t(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>()) :: :ok</pre>

      </div>

<p>Route data to the appropriate destination.</p>
  </section>
</section>
<section class="detail" id="route_outbound_discovery/3">

  <div class="detail-header">
    <a href="#route_outbound_discovery/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">route_outbound_discovery(lap2_addr, clove, name)</h1>

      <a href="https://github.com/r1ghtwr0ng/lap2/blob/main/lib/lap2/networking/router.ex#L329" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> route_outbound_discovery(<a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>(), Clove.t(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>()) :: :ok</pre>

      </div>


  </section>
</section>
<section class="detail" id="route_tcp/2">

  <div class="detail-header">
    <a href="#route_tcp/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">route_tcp(query, name)</h1>

      <a href="https://github.com/r1ghtwr0ng/lap2/blob/main/lib/lap2/networking/router.ex#L280" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> route_tcp(Query.t(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>()) :: :ok</pre>

      </div>


  </section>
</section>
<section class="detail" id="save_query_relay/3">

  <div class="detail-header">
    <a href="#save_query_relay/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">save_query_relay(query_id, proxy_seq, name)</h1>

      <a href="https://github.com/r1ghtwr0ng/lap2/blob/main/lib/lap2/networking/router.ex#L307" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> save_query_relay(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">non_neg_integer</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">non_neg_integer</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>()) :: :ok</pre>

      </div>

<p>Save the origin relay sequence number for a given query ID.
This is done so responses can be routed back to the requesting node.</p>
  </section>
</section>
<section class="detail" id="start_link/1">

  <div class="detail-header">
    <a href="#start_link/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">start_link(config)</h1>

      <a href="https://github.com/r1ghtwr0ng/lap2/blob/main/lib/lap2/networking/router.ex#L19" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> start_link(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>()) :: <a href="https://hexdocs.pm/elixir/GenServer.html#t:on_start/0">GenServer.on_start</a>()</pre>

      </div>

<p>Start the Router process.</p>
  </section>
</section>
<section class="detail" id="terminate/2">

  <div class="detail-header">
    <a href="#terminate/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">terminate(reason, arg2)</h1>

      <a href="https://github.com/r1ghtwr0ng/lap2/blob/main/lib/lap2/networking/router.ex#L265" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> terminate(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">any</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>()) :: :ok</pre>

      </div>

<p>Terminate the UDP server.</p>
  </section>
</section>
<section class="detail" id="update_config/2">

  <div class="detail-header">
    <a href="#update_config/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">update_config(config, name)</h1>

      <a href="https://github.com/r1ghtwr0ng/lap2/blob/main/lib/lap2/networking/router.ex#L362" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> update_config(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>()) :: :ok</pre>

      </div>

<p>Update the configuration in the state</p>
  </section>
</section>

    </div>
  </section>

      <footer class="footer">
        <p>

          <span class="line">
            <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
              Search HexDocs
            </button>

              <a href="LAP2.epub" title="ePub version">
                Download ePub version
              </a>

          </span>
        </p>

        <p class="built-using">
          Built using
          <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.29.4) for the

            <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>

        </p>
      </footer>
    </div>
  </div>
</section>
</div>


  </body>
</html>
