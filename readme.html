<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.29.4">
    <meta name="project" content="LAP2 v0.1.0">

    <title>LAP2 — LAP2 v0.1.0</title>
    <link rel="stylesheet" href="dist/html-elixir-HHVY3JYD.css" />


    <script src="dist/handlebars.runtime-NWIB6V2M.js"></script>
    <script src="dist/handlebars.templates-XWGFFSCD.js"></script>
    <script src="dist/sidebar_items-08CB9D83.js"></script>

      <script src="docs_config.js"></script>

    <script async src="dist/html-JDI3AVDD.js"></script>


  </head>
  <body data-type="extras" class="page-extra">
    <script>

      try {
        var settings = JSON.parse(localStorage.getItem('ex_doc:settings') || '{}');

        if (settings.theme === 'dark' ||
           ((settings.theme === 'system' || settings.theme == null) &&
             window.matchMedia('(prefers-color-scheme: dark)').matches)
           ) {
          document.body.classList.add('dark')
        }
      } catch (error) { }
    </script>

<div class="main">

<button class="sidebar-button sidebar-toggle" aria-label="toggle sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<section class="sidebar">
  <form class="sidebar-search" action="search.html">
    <button type="submit" class="search-button" aria-label="Submit Search">
      <i class="ri-search-2-line" aria-hidden="true" title="Submit search"></i>
    </button>
    <button type="button" tabindex="-1" class="search-close-button" aria-label="Cancel Search">
      <i class="ri-close-line ri-lg" aria-hidden="true" title="Cancel search"></i>
    </button>
    <label class="search-label">
      <p class="sr-only">Search</p>
      <input name="q" type="text" class="search-input" placeholder="Search..." aria-label="Input your search terms" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
    </label>
  </form>

  <div class="autocomplete">
    <div class="autocomplete-results">
    </div>
  </div>

  <div class="sidebar-header">

      <a href="http://github.com/r1ghtwr0ng/lap2">
        <img src="assets/logo.png" alt="LAP2" class="sidebar-projectImage">
      </a>

    <div class="sidebar-projectDetails">
      <a href="http://github.com/r1ghtwr0ng/lap2" class="sidebar-projectName" translate="no">
LAP2
      </a>
      <div class="sidebar-projectVersion" translate="no">
        v0.1.0
      </div>
    </div>
    <ul class="sidebar-listNav">
      <li><a id="extras-list-link" href="#full-list">Pages</a></li>

        <li><a id="modules-list-link" href="#full-list">Modules</a></li>


    </ul>
  </div>

  <div class="gradient"></div>
  <ul id="full-list"></ul>
</section>

<section class="content">
  <output role="status" id="toast"></output>
  <div class="content-outer">
    <div id="content" class="content-inner">

<h1>
<button class="icon-action display-settings">
  <i class="ri-settings-3-line"></i>
  <span class="sr-only">Settings</span>
</button>


    <a href="https://github.com/r1ghtwr0ng/lap2/blob/main/README.md#L1" title="View Source" class="icon-action" rel="help">
      <i class="ri-code-s-slash-line" aria-hidden="true"></i>
      <span class="sr-only">View Source</span>
    </a>


  <span><strong>LAP2</strong></span>
</h1>

<img src="https://user-images.githubusercontent.com/42644807/234358607-a11e2223-3ddf-489d-af27-5392e65dc4a5.png" alt="Image" width="150" height="150"/><h2 id="lightweight-anonymous-p2p-overlay-network" class="section-heading">
  <a href="#lightweight-anonymous-p2p-overlay-network" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">lightweight-anonymous-p2p-overlay-network</p>
  </a>
  <strong>Lightweight Anonymous P2P Overlay Network</strong>
</h2>
<p><a href="https://github.com/r1ghtwr0ng/lap2/actions/workflows/elixir.yml"><img src="https://img.shields.io/github/actions/workflow/status/r1ghtwr0ng/lap2/.github/workflows/elixir.yml?branch=master&label=Elixir%20CI&logo=github" alt="Tests"/></a>
<a href="https://r1ghtwr0ng.github.io/lap2/LAP2.html"><img src="https://img.shields.io/badge/Docs-LAP2%20Docs-blue" alt="Docs"/></a>
<a href="https://opensource.org/licenses/MIT"><img src="https://badgen.net/badge/License/MIT/blue" alt="License"/></a></p><h2 id="introduction" class="section-heading">
  <a href="#introduction" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">introduction</p>
  </a>
  <strong>Introduction</strong>
</h2>
<blockquote><p>&amp;nbsp;&amp;nbsp;The significance of privacy and anonymity in preserving human rights is paramount, especially in the current digital era, where internet users are exposed to various data collection risks such as corporate surveillance, ransomware, and government mass surveillance. The goal of the LAP2 project is to create an anonymous peer-to-peer overlay network that reduces cryptographic overhead for intermediate relays in proxy chains, making it more accessible for usage by low-spec IoT devices. &lt;br&gt;&lt;br&gt;
&amp;nbsp;&amp;nbsp;LAP2 is inspired by and builds upon existing solutions for anonymous peer-to-peer networks such as Tor and I2P while attempting to improve performance using recently published research on a new, more efficient routing technique called Garlic Cast. Furthermore, LAP2 extends the functionality of the existing deniable authenticated key exchange algorithm RSDAKE to introduce the first claimable deniable authenticated key exchange protocol, C-RSDAKE, complete with an open-source Rust implementation.</p></blockquote><hr class="thin"/><h2 id="about" class="section-heading">
  <a href="#about" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">about</p>
  </a>
  <strong>About</strong>
</h2>
<blockquote><p>&amp;nbsp;&amp;nbsp;The LAP2 project is implemented using the Elixir programming language. The main objective is to create an anonymous peer-to-peer overlay network with a significantly lower cryptographic overhead compared to conventional anonymity networks such as TOR and I2P. This will allow low-spec IoT devices to be incorporated into the network.&lt;br&gt;&lt;br&gt;
&amp;nbsp;&amp;nbsp;To improve performance in certain sections, NIFs (Native Implemented Functions) are used to implement computationally intensive algorithms in C and several cryptographic schemes in Rust.</p></blockquote><h2 id="garlic-cast" class="section-heading">
  <a href="#garlic-cast" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">garlic-cast</p>
  </a>
  <strong>Garlic Cast</strong>
</h2>
<blockquote><p>&amp;nbsp;&amp;nbsp;Garlic Cast is a new, more efficient routing technique that LAP2 uses to improve network performance. It does not require the usage of layered cryptography between intermediate relays, thus increasing performance.</p></blockquote><h2 id="c-rsdake" class="section-heading">
  <a href="#c-rsdake" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">c-rsdake</p>
  </a>
  <strong>C-RSDAKE</strong>
</h2>
<blockquote><p>&amp;nbsp;&amp;nbsp;LAP2 extends the functionality of the existing deniable authenticated key exchange algorithm RSDAKE to introduce the first claimable deniable authenticated key exchange protocol, C-RSDAKE, complete with an open-source Rust implementation. When introduced within the AP2P network, the C-RSDAKE construction empowers users to verify each other's identities through cryptographic means independent of the network. This can be a desirable property for an anonymous network due to the lack of central certificate authorities and will extend the network's ability to provide a secure platform for expressing oneself online while mitigating the risk of third-party monitoring and interference.</p></blockquote><hr class="thin"/><h2 id="usage" class="section-heading">
  <a href="#usage" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">usage</p>
  </a>
  <strong>Usage</strong>
</h2>
<p>The documentation for the LAP2 project can be found <a href="https://r1ghtwr0ng.github.io/lap2/LAP2.html">here</a>.&lt;br&gt;
It is recommended that you use the project inside a Docker container. To do that, follow the instructions in the next section:</p><h3 id="docker-setup" class="section-heading">
  <a href="#docker-setup" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">docker-setup</p>
  </a>
  <strong>Docker Setup</strong>
</h3>
<ul><li><p>Install Docker by following the instructions <a href="https://docs.docker.com/get-docker/">here</a></p></li><li><p>Build a Docker container for the project by running the following command in the root directory:</p><pre><code class="makeup bash" translate="no"><span class="">  docker build -t lap2 .
</span></code></pre></li><li><p>Start the container in the LAP2 debug shell (IEx) with the following command:</p><pre><code class="makeup bash" translate="no"><span class="">  docker run -it lap2
</span></code></pre></li><li><p>Instructions on how to use the debug shell can be found in the section below.</p><blockquote><p><strong>Note:</strong> If you want to run a different shell inside the container, set the <code class="inline">ENTRYPOINT</code> in the Dockerfile to the desired shell (e.g., <code class="inline">/bin/bash</code>), then rebuild the container and run it with the same command as above.</p></blockquote><p>  That's it! Now you can use the project inside a Docker container.</p><p>  <strong>Note:</strong> If ran interactively using docker, the project should automatically start in the IEx shell (unless the Dockerfile entrypoint is changed).</p></li></ul><h3 id="iex-interactive-shell" class="section-heading">
  <a href="#iex-interactive-shell" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">iex-interactive-shell</p>
  </a>
  <strong>IEx interactive shell</strong>
</h3>
<ul><li><p>The LAP2 project can be demoed using Elixir's interactive shell (IEx). To improve the user experience, a utility script sets up the IEx environment (aliases, utility lambdas, etc). To start the shell, run the following command in the root directory:</p><pre><code class="makeup bash" translate="no"><span class="">  mix run
</span></code></pre></li><li><p>The shell can be exited by pressing <code class="inline">Ctrl+C</code> twice.</p></li><li><p>The IEx shell can be used to test out much of the functionality of the modules in the project (with the exception of private functions). The following sections show some examples of how to test out some of LAP2's most important features. If needed, a short syntax reference for Elixir can be found <a href="https://hexdocs.pm/elixir/1.12.3/syntax-reference.html">here</a>, however the code examples should provide enough context to understand what is going on. </p></li></ul><hr class="thin"/><h3 id="file-transfer-example" class="section-heading">
  <a href="#file-transfer-example" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">file-transfer-example</p>
  </a>
  <strong>File transfer example</strong>
</h3>
<p>We can test out the file transfer functionality of the project by using the <code class="inline">NetUtils</code> module to simulate the network of nodes and then using the <code class="inline">FileUtils</code> module to transfer files between them.
Here is a general example of testing out the network by performing a file transfer using the IEx shell:</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex(1)&gt; </span><span class="n">addresses</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">NetUtils</span><span class="o">.</span><span class="n">start_network</span><span class="p" data-group-id="3593244136-1">(</span><span class="mi">50</span><span class="p">,</span><span class="w"> </span><span class="mi">40000</span><span class="p" data-group-id="3593244136-1">)</span><span class="w"> </span><span class="c1"># Start network with 50 nodes</span><span class="w">
</span><span class="p" data-group-id="3593244136-2">[</span><span class="s">&quot;aa7707a292f29733&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;5280647b9387f11f&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">...</span><span class="p" data-group-id="3593244136-2">]</span><span class="w">
</span><span class="gp unselectable">iex(2)&gt; </span><span class="nc">NetUtils</span><span class="o">.</span><span class="n">bootstrap_network</span><span class="p" data-group-id="3593244136-3">(</span><span class="p" data-group-id="3593244136-3">)</span><span class="w"> </span><span class="c1"># Setup DHT tables</span><span class="w">
</span><span class="ss">:ok</span><span class="w">
</span><span class="gp unselectable">iex(3)&gt; </span><span class="p" data-group-id="3593244136-4">[</span><span class="n">host</span><span class="p">,</span><span class="w"> </span><span class="n">client</span><span class="p" data-group-id="3593244136-4">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">take_random</span><span class="p" data-group-id="3593244136-5">(</span><span class="n">addresses</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="3593244136-5">)</span><span class="w"> </span><span class="c1"># Pick random host and client</span><span class="w">
</span><span class="p" data-group-id="3593244136-6">[</span><span class="s">&quot;4db73be2deb45f76&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;5585735a2ed3018a&quot;</span><span class="p" data-group-id="3593244136-6">]</span><span class="w">
</span><span class="gp unselectable">iex(4)&gt; </span><span class="nc">Enum</span><span class="o">.</span><span class="n">each</span><span class="p" data-group-id="3593244136-7">(</span><span class="mi">0</span><span class="o">..</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="3593244136-8">fn</span><span class="w"> </span><span class="bp">_</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="c1"># Setup 4 anonymous proxies for both nodes</span><span class="w">
</span><span class="gp unselectable">...(4)&gt; </span><span class="w">  </span><span class="nc">NetUtils</span><span class="o">.</span><span class="n">find_anon_proxy</span><span class="p" data-group-id="3593244136-9">(</span><span class="n">host</span><span class="p" data-group-id="3593244136-9">)</span><span class="w">
</span><span class="gp unselectable">...(4)&gt; </span><span class="w">  </span><span class="nc">NetUtils</span><span class="o">.</span><span class="n">find_anon_proxy</span><span class="p" data-group-id="3593244136-10">(</span><span class="n">client</span><span class="p" data-group-id="3593244136-10">)</span><span class="w">
</span><span class="gp unselectable">...(4)&gt; </span><span class="k" data-group-id="3593244136-8">end</span><span class="p" data-group-id="3593244136-7">)</span><span class="w">
</span><span class="ss">:ok</span><span class="w">
</span><span class="gp unselectable">iex(5)&gt; </span><span class="p" data-group-id="3593244136-11">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">fileio_host</span><span class="p" data-group-id="3593244136-11">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">NetUtils</span><span class="o">.</span><span class="n">run_fileio</span><span class="p" data-group-id="3593244136-12">(</span><span class="n">host</span><span class="p" data-group-id="3593244136-12">)</span><span class="w">  </span><span class="c1"># Start FileIO host service</span><span class="w">
</span><span class="p" data-group-id="3593244136-13">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ed7494faa04094d4&quot;</span><span class="p" data-group-id="3593244136-13">}</span><span class="w">
</span><span class="gp unselectable">iex(6)&gt; </span><span class="p" data-group-id="3593244136-14">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">fileio_cli</span><span class="p" data-group-id="3593244136-14">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">NetUtils</span><span class="o">.</span><span class="n">run_fileio</span><span class="p" data-group-id="3593244136-15">(</span><span class="n">client</span><span class="p" data-group-id="3593244136-15">)</span><span class="w"> </span><span class="c1"># Start FileIO client service</span><span class="w">
</span><span class="p" data-group-id="3593244136-16">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;7df091674c3d4f7f&quot;</span><span class="p" data-group-id="3593244136-16">}</span><span class="w">
</span><span class="gp unselectable">iex(7)&gt; </span><span class="nc">NetUtils</span><span class="o">.</span><span class="n">find_intro_point</span><span class="p" data-group-id="3593244136-17">(</span><span class="n">host</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3593244136-18">[</span><span class="n">fileio_host</span><span class="p" data-group-id="3593244136-18">]</span><span class="p" data-group-id="3593244136-17">)</span><span class="w">  </span><span class="c1"># Find an introduction point</span><span class="w">
</span><span class="ss">:ok</span><span class="w">
</span><span class="gp unselectable">iex(8)&gt; </span><span class="n">intros</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">NetUtils</span><span class="o">.</span><span class="n">get_introduction_points</span><span class="p" data-group-id="3593244136-19">(</span><span class="n">fileio_host</span><span class="p" data-group-id="3593244136-19">)</span><span class="w"> </span><span class="c1"># Get the intro point list (if empty, rerun previous command)</span><span class="w">
</span><span class="p" data-group-id="3593244136-20">[</span><span class="s">&quot;03ce49e5dfc1091f&quot;</span><span class="p" data-group-id="3593244136-20">]</span><span class="w">
</span><span class="gp unselectable">iex(9)&gt; </span><span class="nc">FileIO</span><span class="o">.</span><span class="n">request_file</span><span class="p" data-group-id="3593244136-21">(</span><span class="n">intros</span><span class="p">,</span><span class="w"> </span><span class="n">fileio_host</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;README.md&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/tmp/readme.md&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">fileio_cli</span><span class="p" data-group-id="3593244136-21">)</span><span class="w"> </span><span class="c1"># Request remote file</span><span class="w">
</span><span class="ss">:ok</span><span class="w">
</span><span class="gp unselectable">iex(10)&gt; </span><span class="n">ls</span><span class="w"> </span><span class="s">&quot;/tmp/readme.md&quot;</span><span class="w"> </span><span class="c1"># Check if file was written (debug output should indicate success or fail)</span><span class="w">
</span><span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">readme</span><span class="o">.</span><span class="n">md</span><span class="w">
</span><span class="gp unselectable">iex(11)&gt; </span><span class="nc">FileIO</span><span class="o">.</span><span class="n">stop_service</span><span class="p" data-group-id="3593244136-22">(</span><span class="n">fileio_host</span><span class="p" data-group-id="3593244136-22">)</span><span class="w">
</span><span class="ss">:ok</span><span class="w">
</span><span class="gp unselectable">iex(12)&gt; </span><span class="nc">FileIO</span><span class="o">.</span><span class="n">stop_service</span><span class="p" data-group-id="3593244136-23">(</span><span class="n">fileio_cli</span><span class="p" data-group-id="3593244136-23">)</span><span class="w">
</span><span class="ss">:ok</span><span class="w">
</span><span class="gp unselectable">iex(13)&gt; </span><span class="nc">NetUtils</span><span class="o">.</span><span class="n">stop_network</span><span class="p" data-group-id="3593244136-24">(</span><span class="p" data-group-id="3593244136-24">)</span><span class="w">
</span><span class="no">true</span></code></pre><h3 id="c-rsdake-example" class="section-heading">
  <a href="#c-rsdake-example" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">c-rsdake-example</p>
  </a>
  <strong>C-RSDAKE example</strong>
</h3>
<p>In the previous example C-RSDAKE was used during the anonymous route establishment phase. To test out the C-RSDAKE protocol in isolation, refer to the code example in section <a href="#c_rsdake">C-RSDAKE</a>.</p><hr class="thin"/><h3 id="networking" class="section-heading">
  <a href="#networking" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">networking</p>
  </a>
  <strong>Networking</strong>
</h3>
<h4><strong><em>NetUtils</em></strong></h4><p>To start off, use the <code class="inline">NetUtils.spawn_network</code> function to simulate a network environment by starting multiple network nodes simultaneously. The function takes as arguments the number of nodes to be started and the starting port of the first node. The port numbers for subsequent nodes are incremented by 1 from this number. It returns a list of network addresses (string type) for the spawned nodes.</p><p>In the following example, we are spawning 100 nodes starting from port 40000. The returned network addresses are stored in the <code class="inline">addresses</code> variable:</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex(1)&gt; </span><span class="n">addresses</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">NetUtils</span><span class="o">.</span><span class="n">spawn_network</span><span class="p" data-group-id="7851529805-1">(</span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mi">40000</span><span class="p" data-group-id="7851529805-1">)</span><span class="w">
</span><span class="p" data-group-id="7851529805-2">[</span><span class="n">...</span><span class="p" data-group-id="7851529805-2">]</span></code></pre><blockquote><p><strong>Note:</strong> The number of running nodes is limited by the number of available ports on the host machine. If you get an error saying that the port is already in use, try using a different port number. Try to run less than 1000 nodes to avoid hitting an open port or experiencing performance issues.</p></blockquote><p>The network address of any node can be obtained using the <a href="https://hexdocs.pm/elixir/Enum.html"><code class="inline">Enum</code></a> module as such:</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex(2)&gt; </span><span class="n">address_0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">at</span><span class="p" data-group-id="9962672558-1">(</span><span class="n">addresses</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p" data-group-id="9962672558-1">)</span><span class="w"> </span><span class="c1"># Take the address at index 0</span><span class="w">
</span><span class="s">&quot;...&quot;</span><span class="w">
</span><span class="gp unselectable">iex(3)&gt; </span><span class="n">rand_address</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">random</span><span class="p" data-group-id="9962672558-2">(</span><span class="n">addresses</span><span class="p" data-group-id="9962672558-2">)</span><span class="w"> </span><span class="c1"># Take a random address</span><span class="w">
</span><span class="s">&quot;...&quot;</span></code></pre><p>Alternatively, nodes can be spawned individually using <code class="inline">NetUtils.start_node</code>. To do this, first construct a config file for the node using the <code class="inline">NetUtils.make_config</code> function, then pass the config file to the <code class="inline">NetUtils.start_node</code> function. However, if <code class="inline">NetUtils.start_network</code> has not been called before, the ETS table must be created manually before spawning the node. This can be done using the following commands:</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex(1)&gt; </span><span class="nc">:ets</span><span class="o">.</span><span class="n">new</span><span class="p" data-group-id="0546671440-1">(</span><span class="ss">:network_registry</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="0546671440-2">[</span><span class="ss">:named_table</span><span class="p">,</span><span class="w"> </span><span class="ss">:set</span><span class="p">,</span><span class="w"> </span><span class="ss">:public</span><span class="p" data-group-id="0546671440-2">]</span><span class="p" data-group-id="0546671440-1">)</span><span class="w"> </span><span class="c1"># Create ETS table</span><span class="w">
</span><span class="gp unselectable">iex(2)&gt; </span><span class="n">udp_port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">40000</span><span class="w"> </span><span class="c1"># Set UDP port</span><span class="w">
</span><span class="mi">40000</span><span class="w">
</span><span class="gp unselectable">iex(3)&gt; </span><span class="n">tcp_port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">40000</span><span class="w"> </span><span class="c1"># Set TCP port</span><span class="w">
</span><span class="mi">40000</span><span class="w">
</span><span class="gp unselectable">iex(4)&gt; </span><span class="n">addr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Generator</span><span class="o">.</span><span class="n">generate_hex</span><span class="p" data-group-id="0546671440-3">(</span><span class="mi">8</span><span class="p" data-group-id="0546671440-3">)</span><span class="w"> </span><span class="c1"># Set network address, any string will do</span><span class="w">
</span><span class="s">&quot;...&quot;</span><span class="w">
</span><span class="gp unselectable">iex(5)&gt; </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">NetUtils</span><span class="o">.</span><span class="n">make_config</span><span class="p" data-group-id="0546671440-4">(</span><span class="n">addr</span><span class="p">,</span><span class="w"> </span><span class="n">udp_port</span><span class="p">,</span><span class="w"> </span><span class="n">tcp_port</span><span class="p" data-group-id="0546671440-4">)</span><span class="w"> </span><span class="c1"># Create config</span><span class="w">
</span><span class="p" data-group-id="0546671440-5">%{</span><span class="n">...</span><span class="p" data-group-id="0546671440-5">}</span><span class="w">
</span><span class="gp unselectable">iex(6)&gt; </span><span class="nc">NetUtils</span><span class="o">.</span><span class="n">spawn_node</span><span class="p" data-group-id="0546671440-6">(</span><span class="n">config</span><span class="p" data-group-id="0546671440-6">)</span><span class="w"> </span><span class="c1"># Start node</span><span class="w">
</span><span class="ss">:ok</span></code></pre><hr class="thin"/><p>Once the network has been started, the nodes' routing tables should be bootstrapped. This can be accomplished in multiple ways:</p><ul><li><p>If you wish to bootstrap all network nodes <strong>without</strong> making any network requests (quickest and most reliable way), use <code class="inline">NetUtils.seed_network</code>. This function will update each node's routing table with a copy of the global one (stored in an ETS table). This function takes no arguments:</p><pre><code class="makeup elixir" translate="no"><span class="w">  </span><span class="n">iex</span><span class="p" data-group-id="8771422135-1">(</span><span class="w"> </span><span class="p" data-group-id="8771422135-1">)</span><span class="o">&gt;</span><span class="w"> </span><span class="nc">NetUtils</span><span class="o">.</span><span class="n">seed_network</span><span class="p" data-group-id="8771422135-2">(</span><span class="p" data-group-id="8771422135-2">)</span><span class="w">
  </span><span class="ss">:ok</span></code></pre></li><li><p>Alternatively, if you wish to bootstrap all network nodes by using network DHT update requests, use <code class="inline">NetUtils.bootstrap_network</code>. This function will first seed a single node with the global registry table, then instruct all other nodes to request a DHT update from it. Again, this function takes no arguments and returns an atom of the status of the operation:</p><pre><code class="makeup elixir" translate="no"><span class="w">  </span><span class="n">iex</span><span class="p" data-group-id="0210391387-1">(</span><span class="w"> </span><span class="p" data-group-id="0210391387-1">)</span><span class="o">&gt;</span><span class="w"> </span><span class="nc">NetUtils</span><span class="o">.</span><span class="n">bootstrap_network</span><span class="p" data-group-id="0210391387-2">(</span><span class="p" data-group-id="0210391387-2">)</span><span class="w">
  </span><span class="ss">:ok</span></code></pre></li><li><p>The final option is to bootstrap individual nodes. To do that, first use <code class="inline">NetUtils.seed_node</code> to setup a random node's DHT table as before. This function accepts no arguments but returns the IP address and port of the node that was seeded:</p><pre><code class="makeup elixir" translate="no"><span class="w">  </span><span class="n">iex</span><span class="p" data-group-id="7470059755-1">(</span><span class="w"> </span><span class="p" data-group-id="7470059755-1">)</span><span class="o">&gt;</span><span class="w"> </span><span class="p" data-group-id="7470059755-2">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">seed_addr</span><span class="p" data-group-id="7470059755-2">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">NetUtils</span><span class="o">.</span><span class="n">seed_node</span><span class="p" data-group-id="7470059755-3">(</span><span class="p" data-group-id="7470059755-3">)</span><span class="w">
  </span><span class="p" data-group-id="7470059755-4">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;...&quot;</span><span class="p" data-group-id="7470059755-4">}</span></code></pre></li><li><p>Then, use <code class="inline">NetUtils.bootstrap_node</code> to instruct another node to request a DHT update from the seeded node. This function takes the network address of the client node and the IP address and port of DHT provider node:</p><pre><code class="makeup elixir" translate="no"><span class="w">  </span><span class="n">iex</span><span class="p" data-group-id="3416089064-1">(</span><span class="w"> </span><span class="p" data-group-id="3416089064-1">)</span><span class="o">&gt;</span><span class="w"> </span><span class="nc">NetUtils</span><span class="o">.</span><span class="n">update_dht</span><span class="p" data-group-id="3416089064-2">(</span><span class="n">lap2_addr</span><span class="p">,</span><span class="w"> </span><span class="n">seed_addr</span><span class="p" data-group-id="3416089064-2">)</span><span class="w">
  </span><span class="ss">:ok</span></code></pre><p>  This process can be repeated to bootstrap the entire network (which is exactly what <code class="inline">NetUtils.bootstrap_network</code> does).</p></li></ul><p>To check the contents of a node's routing table, use <code class="inline">NetUtils.inspect_dht</code>. This function takes the network address of the node as an argument and returns a map of the node's routing table:</p><pre><code class="makeup elixir" translate="no"><span class="n">iex</span><span class="p" data-group-id="1245196520-1">(</span><span class="w"> </span><span class="p" data-group-id="1245196520-1">)</span><span class="o">&gt;</span><span class="w"> </span><span class="nc">NetUtils</span><span class="o">.</span><span class="n">inspect_dht</span><span class="p" data-group-id="1245196520-2">(</span><span class="n">lap2_addr</span><span class="p" data-group-id="1245196520-2">)</span><span class="w">
</span><span class="p" data-group-id="1245196520-3">%{</span><span class="w">
    </span><span class="s">&quot;...&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="1245196520-4">{</span><span class="s">&quot;127.0.0.1&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">...</span><span class="p" data-group-id="1245196520-4">}</span><span class="p">,</span><span class="w">
    </span><span class="n">...</span><span class="w">
</span><span class="p" data-group-id="1245196520-3">}</span></code></pre><hr class="thin"/><p>Once the nodes have had their routing tables set up, they can start communicating with each other. To set up anonymous routes, select any node and use <code class="inline">NetUtils.find_anon_proxy</code> to instruct it to find an anonymous proxy. This function takes the network address of the node as an argument and returns the status of the operation:</p><pre><code class="makeup elixir" translate="no"><span class="n">iex</span><span class="p" data-group-id="0564367211-1">(</span><span class="w"> </span><span class="p" data-group-id="0564367211-1">)</span><span class="o">&gt;</span><span class="w"> </span><span class="nc">NetUtils</span><span class="o">.</span><span class="n">find_anon_proxy</span><span class="p" data-group-id="0564367211-2">(</span><span class="n">lap2_addr</span><span class="p" data-group-id="0564367211-2">)</span><span class="w">
</span><span class="ss">:ok</span></code></pre><p>The function can be called multiple times to establish multiple proxies:</p><pre><code class="makeup elixir" translate="no"><span class="n">iex</span><span class="p" data-group-id="9039578602-1">(</span><span class="w"> </span><span class="p" data-group-id="9039578602-1">)</span><span class="o">&gt;</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">each</span><span class="p" data-group-id="9039578602-2">(</span><span class="mi">1</span><span class="o">..</span><span class="n">num_proxies</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="9039578602-3">fn</span><span class="w"> </span><span class="bp">_</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">NetUtils</span><span class="o">.</span><span class="n">find_anon_proxy</span><span class="p" data-group-id="9039578602-4">(</span><span class="n">lap2_addr</span><span class="p" data-group-id="9039578602-4">)</span><span class="w"> </span><span class="k" data-group-id="9039578602-3">end</span><span class="p" data-group-id="9039578602-2">)</span><span class="w">
</span><span class="ss">:ok</span></code></pre><p>Once a sufficient number of proxies has been established (depends on config setup, usually &gt;1 in DEV environment), a node can request a random proxy to become its introduction point. To do this, use <code class="inline">NetUtils.find_intro_point</code>.</p><p><strong><em>Arguments:</em></strong>
This function expects the following arguments:</p><ol><li><code class="inline">lap2_addr</code>: (string) The network address of the node requesting the introduction point.</li><li><code class="inline">service_identifier</code>: (string) The service identifier of the service that the node wishes to access. See how to generate service identifiers in the <a href="#fileutils-services">FileUtils</a> section.<pre><code class="makeup elixir" translate="no"><span class="n">iex</span><span class="p" data-group-id="2561536017-1">(</span><span class="w"> </span><span class="p" data-group-id="2561536017-1">)</span><span class="o">&gt;</span><span class="w"> </span><span class="nc">NetUtils</span><span class="o">.</span><span class="n">find_intro_point</span><span class="p" data-group-id="2561536017-2">(</span><span class="n">lap2_addr</span><span class="p">,</span><span class="w"> </span><span class="n">service_identifier</span><span class="p" data-group-id="2561536017-2">)</span><span class="w">
</span><span class="ss">:ok</span></code></pre></li></ol><p>Verify that an introduction point has been setup and find its network address by using <code class="inline">NetUtils.list_intro_points</code> (no arguments required):</p><pre><code class="makeup elixir" translate="no"><span class="n">iex</span><span class="p" data-group-id="3628004180-1">(</span><span class="w"> </span><span class="p" data-group-id="3628004180-1">)</span><span class="o">&gt;</span><span class="w"> </span><span class="nc">NetUtils</span><span class="o">.</span><span class="n">list_intro_points</span><span class="p" data-group-id="3628004180-2">(</span><span class="p" data-group-id="3628004180-2">)</span><span class="w">
</span><span class="p" data-group-id="3628004180-3">%{</span><span class="n">...</span><span class="p" data-group-id="3628004180-3">}</span></code></pre><p>Retrieving remote files anonymously is covered in the <a href="#fileutils-services">FileUtils</a> section.</p><hr class="thin"/><p>Finally, to stop the network, use <code class="inline">NetUtils.stop_network</code>. This function takes no arguments and returns the status of the operation:</p><pre><code class="makeup elixir" translate="no"><span class="n">iex</span><span class="p" data-group-id="5934271319-1">(</span><span class="w"> </span><span class="p" data-group-id="5934271319-1">)</span><span class="o">&gt;</span><span class="w"> </span><span class="nc">NetUtils</span><span class="o">.</span><span class="n">stop_network</span><span class="p" data-group-id="5934271319-2">(</span><span class="p" data-group-id="5934271319-2">)</span><span class="w">
</span><span class="ss">:ok</span></code></pre><p>If needed, individual nodes can be stopped using <code class="inline">NetUtils.stop_node</code>. This function takes the network address of the node as an argument and returns the status of the operation:</p><pre><code class="makeup elixir" translate="no"><span class="n">iex</span><span class="p" data-group-id="2280952110-1">(</span><span class="w"> </span><span class="p" data-group-id="2280952110-1">)</span><span class="o">&gt;</span><span class="w"> </span><span class="nc">NetUtils</span><span class="o">.</span><span class="n">stop_node</span><span class="p" data-group-id="2280952110-2">(</span><span class="n">lap2_addr</span><span class="p" data-group-id="2280952110-2">)</span><span class="w">
</span><span class="ss">:ok</span></code></pre><p>This just about covers the networking section of the LAP2 project. The following sections will cover the other modules in the project.</p><hr class="thin"/><h3 id="cryptography" class="section-heading">
  <a href="#cryptography" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">cryptography</p>
  </a>
  <strong>Cryptography</strong>
</h3>
<p>The cryptographic section has a wide range of modules that can be tested out. Unlike the networking section, the CryptoUtils module only provides a few functions for encoding/decoding data to hex and base64. Since these modules are not designed to be used from the command line, their usage is a little less straightforward (deeply nested structures). I recommend looking at the unit tests and <a href="https://r1ghtwr0ng.github.io/lap2/LAP2.html">docs</a> for examples that haven't been covered in this README.&lt;br&gt;&lt;br&gt;
The following modules are available in the crypto section:</p><p><code class="inline">CryptoNifs</code> - Cryptographic primitives implemented in Rust NIFs. Avoid calling these functions directly where possible, they can throw exceptions if argument sizes are not correct (the code is memory safe but debugging Rust NIF exceptions can be a pain).&lt;br&gt;
<code class="inline">CryptoUtils</code> - Provides functions for encoding/decoding data to hex and base64.&lt;br&gt;
<code class="inline">ClaimableRS</code> - Implements the claimable ring signature scheme.&lt;br&gt;
<code class="inline">RSDAKE</code> - Implements the RSDAKE protocol (out-of-date, use <code class="inline">C_RSDAKE</code> instead).&lt;br&gt;
<code class="inline">C_RSDAKE</code> - Implements the Claimable RSDAKE key exchange protocol.&lt;br&gt;
<code class="inline">RabinIDA</code> - Implements Rabin's IDA.&lt;br&gt;
<code class="inline">SecureIDA</code> - Implements a security enhanced IDA using Rabin's IDA for data dispersal and Shamir's secret sharing for symmetric key dispersal.&lt;br&gt;</p><hr class="thin"/><h4><strong><em>CryptoUtils</em></strong></h4><p>The <code class="inline">CryptoUtils</code> module provides functions for encoding/decoding data to hex and base64, as well as a few convenience functions for various crypto schemes. These functions can be used to encode and more easily transfer data to and from external tools. The following functions are available:</p><ul><li><code class="inline">CryptoUtils.list_to_hex/1</code> - Converts a charlist to a hex string.</li><li><code class="inline">CryptoUtils.hex_to_list/1</code> - Converts a hex string to a charlist.</li><li><code class="inline">CryptoUtils.list_to_b64/1</code> - Converts a charlist to a base64 string.</li><li><code class="inline">CryptoUtils.b64_to_list/1</code> - Converts a base64 string to a charlist.</li><li><code class="inline">CryptoUtils.gen_ring/3</code> - Given a public key, ring index and ring size, generate a ring of public keys with the given public key at the given index (demo in next section).</li></ul><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex(1)&gt; </span><span class="n">list</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="5659349208-1">[</span><span class="mi">99</span><span class="p">,</span><span class="w"> </span><span class="mi">104</span><span class="p">,</span><span class="w"> </span><span class="mi">97</span><span class="p">,</span><span class="w"> </span><span class="mi">114</span><span class="p">,</span><span class="w"> </span><span class="mi">108</span><span class="p">,</span><span class="w"> </span><span class="mi">105</span><span class="p">,</span><span class="w"> </span><span class="mi">115</span><span class="p">,</span><span class="w"> </span><span class="mi">116</span><span class="p" data-group-id="5659349208-1">]</span><span class="w">
</span><span class="sc">&#39;charlist&#39;</span><span class="w">
</span><span class="gp unselectable">iex(2)&gt; </span><span class="nc">CryptoUtils</span><span class="o">.</span><span class="n">list_to_hex</span><span class="p" data-group-id="5659349208-2">(</span><span class="n">list</span><span class="p" data-group-id="5659349208-2">)</span><span class="w">
</span><span class="s">&quot;636861726C697374&quot;</span><span class="w">
</span><span class="gp unselectable">iex(3)&gt; </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">CryptoUtils</span><span class="o">.</span><span class="n">hex_to_list</span><span class="p" data-group-id="5659349208-3">(</span><span class="p" data-group-id="5659349208-3">)</span><span class="w"> </span><span class="c1"># The pipe operator ( |&gt; ) is used to pass the result of the previous function call as the first argument to the next function call</span><span class="w">
</span><span class="sc">&#39;charlist&#39;</span><span class="w">
</span><span class="gp unselectable">iex(4)&gt; </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">CryptoUtils</span><span class="o">.</span><span class="n">list_to_b64</span><span class="p" data-group-id="5659349208-4">(</span><span class="p" data-group-id="5659349208-4">)</span><span class="w">
</span><span class="s">&quot;Y2hhcmxpc3Q=&quot;</span><span class="w">
</span><span class="gp unselectable">iex(5)&gt; </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">CryptoUtils</span><span class="o">.</span><span class="n">b64_to_list</span><span class="p" data-group-id="5659349208-5">(</span><span class="p" data-group-id="5659349208-5">)</span><span class="w">
</span><span class="sc">&#39;charlist&#39;</span><span class="w">
</span><span class="gp unselectable">iex(6)&gt; </span><span class="o">==</span><span class="w"> </span><span class="n">list</span><span class="w">
</span><span class="no">true</span></code></pre><hr class="thin"/><h4><strong><em>CryptoNifs</em></strong></h4><p>The <code class="inline">CryptoNifs</code> module provides the cryptographic primitives on which the rest of the crypto modules are built (except RabinIDA and SecureIDA). These primitives are implemented in Rust NIFs for performance reasons. The following functions are available:</p><ul><li><p><code class="inline">CryptoNifs.prf_gen/1</code> - Generates a pseudorandom function (PRF) key. Takes the size of the key in bits as an argument and returns the key as a binary.</p></li><li><p><code class="inline">CryptoNifs.prf_eval/2</code> - Evaluates a PRF. Takes the secret key and input as arguments and returns a 128-bit output as a charlist.</p></li></ul><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex(1)&gt; </span><span class="n">prf_sk</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">CryptoNifs</span><span class="o">.</span><span class="n">prf_gen</span><span class="p" data-group-id="4887140330-1">(</span><span class="mi">256</span><span class="p" data-group-id="4887140330-1">)</span><span class="w">
</span><span class="p" data-group-id="4887140330-2">[</span><span class="mi">230</span><span class="p">,</span><span class="w"> </span><span class="mi">75</span><span class="p">,</span><span class="w"> </span><span class="mi">38</span><span class="p">,</span><span class="w"> </span><span class="mi">236</span><span class="p">,</span><span class="w"> </span><span class="mi">139</span><span class="p">,</span><span class="w"> </span><span class="mi">109</span><span class="p">,</span><span class="w"> </span><span class="mi">101</span><span class="p">,</span><span class="w"> </span><span class="mi">23</span><span class="p">,</span><span class="w"> </span><span class="mi">114</span><span class="p">,</span><span class="w"> </span><span class="mi">235</span><span class="p">,</span><span class="w"> </span><span class="mi">115</span><span class="p">,</span><span class="w"> </span><span class="mi">57</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">248</span><span class="p">,</span><span class="w"> </span><span class="mi">80</span><span class="p">,</span><span class="w"> </span><span class="mi">143</span><span class="p">,</span><span class="w"> </span><span class="mi">19</span><span class="p">,</span><span class="w">
 </span><span class="mi">176</span><span class="p">,</span><span class="w"> </span><span class="mi">131</span><span class="p">,</span><span class="w"> </span><span class="mi">149</span><span class="p">,</span><span class="w"> </span><span class="mi">133</span><span class="p">,</span><span class="w"> </span><span class="mi">134</span><span class="p">,</span><span class="w"> </span><span class="mi">221</span><span class="p">,</span><span class="w"> </span><span class="mi">126</span><span class="p">,</span><span class="w"> </span><span class="mi">129</span><span class="p">,</span><span class="w"> </span><span class="mi">109</span><span class="p">,</span><span class="w"> </span><span class="mi">217</span><span class="p">,</span><span class="w"> </span><span class="mi">59</span><span class="p">,</span><span class="w"> </span><span class="mi">237</span><span class="p">,</span><span class="w"> </span><span class="mi">209</span><span class="p">,</span><span class="w"> </span><span class="mi">220</span><span class="p" data-group-id="4887140330-2">]</span><span class="w">
</span><span class="gp unselectable">iex(2)&gt; </span><span class="nc">CryptoNifs</span><span class="o">.</span><span class="n">prf_eval</span><span class="p" data-group-id="4887140330-3">(</span><span class="n">prf_sk</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;RANDOM SEED DATA&#39;</span><span class="p" data-group-id="4887140330-3">)</span><span class="w">
</span><span class="p" data-group-id="4887140330-4">[</span><span class="mi">14</span><span class="p">,</span><span class="w"> </span><span class="mi">74</span><span class="p">,</span><span class="w"> </span><span class="mi">45</span><span class="p">,</span><span class="w"> </span><span class="mi">113</span><span class="p">,</span><span class="w"> </span><span class="mi">94</span><span class="p">,</span><span class="w"> </span><span class="mi">226</span><span class="p">,</span><span class="w"> </span><span class="mi">43</span><span class="p">,</span><span class="w"> </span><span class="mi">87</span><span class="p">,</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w"> </span><span class="mi">99</span><span class="p">,</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="mi">167</span><span class="p">,</span><span class="w"> </span><span class="mi">131</span><span class="p">,</span><span class="w"> </span><span class="mi">202</span><span class="p">,</span><span class="w"> </span><span class="mi">127</span><span class="p">,</span><span class="w"> </span><span class="mi">41</span><span class="p" data-group-id="4887140330-4">]</span></code></pre><ul><li><p><code class="inline">CryptoNifs.commit_gen/2</code> - Generates a commitment. Takes the secret key and message as arguments and returns the commitment as a binary.</p></li><li><p><code class="inline">CryptoNifs.commit_vrfy/3</code> - Verifies the validity of a commitment. Takes the secret key, message and commitment as arguments and returns a boolean.</p></li></ul><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex(3)&gt; </span><span class="n">commitment</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">CryptoNifs</span><span class="o">.</span><span class="n">commit_gen</span><span class="p" data-group-id="3030635155-1">(</span><span class="n">prf_sk</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;Commitment message&#39;</span><span class="p" data-group-id="3030635155-1">)</span><span class="w">
</span><span class="p" data-group-id="3030635155-2">[</span><span class="mi">63</span><span class="p">,</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="mi">188</span><span class="p">,</span><span class="w"> </span><span class="mi">48</span><span class="p">,</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w"> </span><span class="mi">209</span><span class="p">,</span><span class="w"> </span><span class="mi">247</span><span class="p">,</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="mi">240</span><span class="p">,</span><span class="w"> </span><span class="mi">207</span><span class="p">,</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="mi">128</span><span class="p">,</span><span class="w"> </span><span class="mi">240</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">134</span><span class="p">,</span><span class="w"> </span><span class="mi">128</span><span class="p">,</span><span class="w"> </span><span class="mi">127</span><span class="p">,</span><span class="w">
 </span><span class="mi">108</span><span class="p">,</span><span class="w"> </span><span class="mi">226</span><span class="p">,</span><span class="w"> </span><span class="mi">82</span><span class="p">,</span><span class="w"> </span><span class="mi">192</span><span class="p">,</span><span class="w"> </span><span class="mi">45</span><span class="p">,</span><span class="w"> </span><span class="mi">29</span><span class="p">,</span><span class="w"> </span><span class="mi">241</span><span class="p">,</span><span class="w"> </span><span class="mi">124</span><span class="p">,</span><span class="w"> </span><span class="mi">207</span><span class="p">,</span><span class="w"> </span><span class="mi">101</span><span class="p">,</span><span class="w"> </span><span class="mi">241</span><span class="p">,</span><span class="w"> </span><span class="mi">49</span><span class="p">,</span><span class="w"> </span><span class="mi">114</span><span class="p">,</span><span class="w"> </span><span class="mi">197</span><span class="p" data-group-id="3030635155-2">]</span><span class="w">
</span><span class="gp unselectable">iex(4)&gt; </span><span class="nc">CryptoNifs</span><span class="o">.</span><span class="n">commit_vrfy</span><span class="p" data-group-id="3030635155-3">(</span><span class="n">prf_sk</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;Commitment message&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">commitment</span><span class="p" data-group-id="3030635155-3">)</span><span class="w">
</span><span class="no">true</span><span class="w">
</span><span class="gp unselectable">iex(5)&gt; </span><span class="nc">CryptoNifs</span><span class="o">.</span><span class="n">commit_vrfy</span><span class="p" data-group-id="3030635155-4">(</span><span class="n">prf_sk</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;Invalid message&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">commitment</span><span class="p" data-group-id="3030635155-4">)</span><span class="w">
</span><span class="no">false</span></code></pre><ul><li><p><code class="inline">CryptoNifs.rs_nif_gen/0</code> - Generates a secret and public key pair for the SAG (Spontaneous Anonymous Group) ring signature scheme. The result is returned as a tuple of charlists (use the wrapper <code class="inline">ClaimableRS.rs_gen/0</code> instead).</p></li><li><p><code class="inline">CryptoNifs.rs_nif_sign/4</code> - Signs a message using the SAG ring signature scheme. Takes index of the signer in the ring, the signer's secret key, the ring of public keys (list of charlists) and the message to be signed (charlist). The function returns a ring signature tuple containing the signature challenge, response, and ring (charlist, list(charlist), list(charlist)). Use the wrapper <code class="inline">ClaimableRS.rs_sign/4</code> instead for argument size verification.</p></li><li><p><code class="inline">CryptoNifs.rs_nif_vrfy/4</code> - Verifies the validity of an SAG ring signature. Expects as input the signature challenge (charlist), the ring of public keys (list of charlists), the challenge responses (list of charlists) and the message that was signed. Returns a true if the signature is valid, false otherwise. Use the wrapper <code class="inline">ClaimableRS.rs_vrfy/2</code> instead for argument size verification and overall better interface.</p></li><li><p><code class="inline">CryptoUtils.gen_ring/3</code> - Creates a ring of public keys. Expects the ring position of the signer (integer index, starting from 0), the public key of the signer and the size of the ring. This is a utility function for quickly creating rings for the signature scheme. Returns a ring in the form of a list of public keys (charlists).</p></li></ul><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex(1)&gt; </span><span class="p" data-group-id="3070224202-1">{</span><span class="n">sk</span><span class="p">,</span><span class="w"> </span><span class="n">pk</span><span class="p" data-group-id="3070224202-1">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">CryptoNifs</span><span class="o">.</span><span class="n">rs_nif_gen</span><span class="p" data-group-id="3070224202-2">(</span><span class="p" data-group-id="3070224202-2">)</span><span class="w"> </span><span class="c1"># Generate key pair</span><span class="w">
</span><span class="p" data-group-id="3070224202-3">{</span><span class="p" data-group-id="3070224202-4">[</span><span class="n">...</span><span class="p" data-group-id="3070224202-4">]</span><span class="p">,</span><span class="p" data-group-id="3070224202-5">[</span><span class="n">...</span><span class="p" data-group-id="3070224202-5">]</span><span class="p" data-group-id="3070224202-3">}</span><span class="w">
</span><span class="gp unselectable">iex(2)&gt; </span><span class="n">ring_idx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="c1"># The index position of the signer in the ring</span><span class="w">
</span><span class="gp unselectable">iex(3)&gt; </span><span class="n">ring_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="c1"># The number of ring participants (including the signer)</span><span class="w">
</span><span class="gp unselectable">iex(4)&gt; </span><span class="n">ring</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">CryptoUtils</span><span class="o">.</span><span class="n">gen_ring</span><span class="p" data-group-id="3070224202-6">(</span><span class="n">ring_idx</span><span class="p">,</span><span class="w"> </span><span class="n">pk</span><span class="p">,</span><span class="w"> </span><span class="n">ring_size</span><span class="p" data-group-id="3070224202-6">)</span><span class="w"> </span><span class="c1"># Generate a ring</span><span class="w">
</span><span class="p" data-group-id="3070224202-7">[</span><span class="p" data-group-id="3070224202-8">[</span><span class="n">...</span><span class="p" data-group-id="3070224202-8">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3070224202-9">[</span><span class="n">...</span><span class="p" data-group-id="3070224202-9">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3070224202-10">[</span><span class="n">...</span><span class="p" data-group-id="3070224202-10">]</span><span class="p" data-group-id="3070224202-7">]</span><span class="w">
</span><span class="gp unselectable">iex(5)&gt; </span><span class="p" data-group-id="3070224202-11">{</span><span class="n">chal</span><span class="p">,</span><span class="w"> </span><span class="n">new_ring</span><span class="p">,</span><span class="w"> </span><span class="n">resp</span><span class="p" data-group-id="3070224202-11">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">CryptoNifs</span><span class="o">.</span><span class="n">rs_nif_sign</span><span class="p" data-group-id="3070224202-12">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">sk</span><span class="p">,</span><span class="w"> </span><span class="n">ring</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;Test message for signing&#39;</span><span class="p" data-group-id="3070224202-12">)</span><span class="w"> </span><span class="c1"># Sign message</span><span class="w">
</span><span class="p" data-group-id="3070224202-13">{</span><span class="p" data-group-id="3070224202-14">[</span><span class="n">...</span><span class="p" data-group-id="3070224202-14">]</span><span class="p">,</span><span class="p" data-group-id="3070224202-15">[</span><span class="n">...</span><span class="p" data-group-id="3070224202-15">]</span><span class="p">,</span><span class="p" data-group-id="3070224202-16">[</span><span class="n">...</span><span class="p" data-group-id="3070224202-16">]</span><span class="p" data-group-id="3070224202-13">}</span><span class="w">
</span><span class="gp unselectable">iex(6)&gt; </span><span class="nc">CryptoNifs</span><span class="o">.</span><span class="n">rs_nif_vrfy</span><span class="p" data-group-id="3070224202-17">(</span><span class="n">chal</span><span class="p">,</span><span class="w"> </span><span class="n">new_ring</span><span class="p">,</span><span class="w"> </span><span class="n">resp</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;Test message for signing&#39;</span><span class="p" data-group-id="3070224202-17">)</span><span class="w"> </span><span class="c1"># Check valid signature</span><span class="w">
</span><span class="no">true</span><span class="w">
</span><span class="gp unselectable">iex(7)&gt; </span><span class="nc">CryptoNifs</span><span class="o">.</span><span class="n">rs_nif_vrfy</span><span class="p" data-group-id="3070224202-18">(</span><span class="n">chal</span><span class="p">,</span><span class="w"> </span><span class="n">new_ring</span><span class="p">,</span><span class="w"> </span><span class="n">resp</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;Invalid message&#39;</span><span class="p" data-group-id="3070224202-18">)</span><span class="w"> </span><span class="c1"># Check invalid signature</span><span class="w">
</span><span class="no">false</span></code></pre><blockquote><p><strong>Note:</strong> The contents of the charlists have been replaced with ... for readability. The charlists in this crypto modules are essentially integer lists of type uint8 (0-255).</p></blockquote><ul><li><p><code class="inline">CryptoNifs.standard_signature_gen/0</code> - Standard signature scheme key generation function. Returns a tuple of secret and verification keys (charlists).</p></li><li><p><code class="inline">CryptoNifs.standard_signature_sign/3</code> - Probabilistic signature scheme signing function (RSA-PSS). Expects as arguments the signer's secret key, message for signing and randomness as a seed. Returns the RSA-PSS signature as a charlist.</p></li><li><p><code class="inline">CryptoNifs.standard_signature_vrfy/3</code> - Probabilistic signature scheme verification function (RSA-PSS). Expects as arguments the signature, signer's verification key and message for verification and signature. Returns a boolean.</p></li></ul><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex(1)&gt; </span><span class="n">rand</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">CryptoNifs</span><span class="o">.</span><span class="n">prf_gen</span><span class="p" data-group-id="3747202157-1">(</span><span class="mi">256</span><span class="p" data-group-id="3747202157-1">)</span><span class="w"> </span><span class="c1"># Generate randomness</span><span class="w">
</span><span class="p" data-group-id="3747202157-2">[</span><span class="n">...</span><span class="p" data-group-id="3747202157-2">]</span><span class="w">
</span><span class="gp unselectable">iex(2)&gt; </span><span class="p" data-group-id="3747202157-3">{</span><span class="n">sk</span><span class="p">,</span><span class="w"> </span><span class="n">vk</span><span class="p" data-group-id="3747202157-3">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">CryptoNifs</span><span class="o">.</span><span class="n">standard_signature_gen</span><span class="p" data-group-id="3747202157-4">(</span><span class="p" data-group-id="3747202157-4">)</span><span class="w"> </span><span class="c1"># Generate RSA keys</span><span class="w">
</span><span class="p" data-group-id="3747202157-5">{</span><span class="p" data-group-id="3747202157-6">[</span><span class="n">...</span><span class="p" data-group-id="3747202157-6">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3747202157-7">[</span><span class="n">...</span><span class="p" data-group-id="3747202157-7">]</span><span class="p" data-group-id="3747202157-5">}</span><span class="w">
</span><span class="gp unselectable">iex(3)&gt; </span><span class="n">signature</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">CryptoNifs</span><span class="o">.</span><span class="n">standard_signature_sign</span><span class="p" data-group-id="3747202157-8">(</span><span class="n">sk</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;Test message for signing&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">rand</span><span class="p" data-group-id="3747202157-8">)</span><span class="w"> </span><span class="c1"># Sign message</span><span class="w">
</span><span class="p" data-group-id="3747202157-9">[</span><span class="n">...</span><span class="p" data-group-id="3747202157-9">]</span><span class="w">
</span><span class="gp unselectable">iex(4)&gt; </span><span class="nc">CryptoNifs</span><span class="o">.</span><span class="n">standard_signature_vrfy</span><span class="p" data-group-id="3747202157-10">(</span><span class="n">signature</span><span class="p">,</span><span class="w"> </span><span class="n">vk</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;Test message for signing&#39;</span><span class="p" data-group-id="3747202157-10">)</span><span class="w"> </span><span class="c1"># Verify signature</span><span class="w">
</span><span class="no">true</span><span class="w">
</span><span class="gp unselectable">iex(5)&gt; </span><span class="nc">CryptoNifs</span><span class="o">.</span><span class="n">standard_signature_vrfy</span><span class="p" data-group-id="3747202157-11">(</span><span class="n">signature</span><span class="p">,</span><span class="w"> </span><span class="n">vk</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;Invalid message&#39;</span><span class="p" data-group-id="3747202157-11">)</span><span class="w"> </span><span class="c1"># Invalid signature</span><span class="w">
</span><span class="no">false</span></code></pre><hr class="thin"/><h4><strong><em>ClaimableRS</em></strong></h4><p>The <code class="inline">ClaimableRS</code> module is a contains a few wrappers for the <code class="inline">CryptoNifs</code> module, as well as functions for generating, signing and verifying claimable ring signatures. The module is used in the <code class="inline">C_RSDAKE</code> module for using claimable ring signatures in the RSDAKE protocol. The following section does not include the wrappers for the <code class="inline">CryptoNifs</code> functions, as they are essentially the same as the ones in the <code class="inline">CryptoNifs</code> module. The other functions are as follows:</p><ul><li><p><code class="inline">ClaimableRS.crs_gen/0</code> - Generates a secret and verification key pair for the claimable ring signature scheme, returned as map with sk: and vk: keys.</p></li><li><p><code class="inline">ClaimableRS.crs_sign/4</code> - Signs a message using the claimable ring signature scheme. Similarly to <code class="inline">ClaimableRS.rs_sign/4</code>, it takes as arguments the ring index of the signer, the signer's secret <em>claimable ring signature</em> key, the ring of public keys and the message to be signed. Returns a tuple of {:ok, SAG} or {:error, atom}, where SAG is a struct containing the signature challenge, response and ring and atom is the error that has occured.</p></li><li><p><code class="inline">ClaimableRS.crs_vrfy/2</code> - Verifies the validity of a claimable ring signature. Expects as arguments the SAG struct generated on signing and the message that has been signed. Returns an {:ok, boolean} if the arguments are valid, or {:error, atom} with information about the error in the atom.</p></li><li><p><code class="inline">ClaimableRS.crs_claim/3</code> - Produces a claim for a given ring signature. Expects as arguments the ring index of the signer, the signer's secret <em>claimable ring signature</em> key and the claimable signature (SAG struct) for which the claim will be made. If valid, returns {:ok, claim} where the claim is a tuple of the commitment randomness and standard signature. If invalid, returns {:error, atom} with information about the error in the atom.</p></li><li><p><code class="inline">ClaimableRS.crs_vrfy_claim/3</code> - Verifies the validity of a claim for a given ring signature. Expects as arguments the claim, the ring index of the signer and the claimable signature (SAG struct) for which the claim will be made. If valid, returns {:ok, boolean}. If invalid, returns {:error, atom} with information about the error in the atom.</p></li><li><p><code class="inline">ClaimableRS.sag_to_charlist/1</code> - Deconstructs a SAG struct to a charlist. Expects as argument the SAG struct. Returns a list of the challenge, ring and responses (like in <code class="inline">CryptoNifs.rs_nif_sign/4</code>).</p></li></ul><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex(1)&gt; </span><span class="n">ring_idx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="gp unselectable">iex(2)&gt; </span><span class="p" data-group-id="2535667072-1">%{</span><span class="ss">sk</span><span class="p">:</span><span class="w"> </span><span class="n">sk</span><span class="p">,</span><span class="w"> </span><span class="ss">vk</span><span class="p">:</span><span class="w"> </span><span class="n">vk</span><span class="p" data-group-id="2535667072-1">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">ClaimableRS</span><span class="o">.</span><span class="n">crs_gen</span><span class="p" data-group-id="2535667072-2">(</span><span class="p" data-group-id="2535667072-2">)</span><span class="w"> </span><span class="c1"># Generate claimable RS key pair</span><span class="w">
</span><span class="p" data-group-id="2535667072-3">%{</span><span class="w">
  </span><span class="ss">sk</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2535667072-4">{</span><span class="p" data-group-id="2535667072-5">{</span><span class="p" data-group-id="2535667072-6">[</span><span class="n">...</span><span class="p" data-group-id="2535667072-6">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2535667072-7">[</span><span class="n">...</span><span class="p" data-group-id="2535667072-7">]</span><span class="p" data-group-id="2535667072-5">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2535667072-8">[</span><span class="n">...</span><span class="p" data-group-id="2535667072-8">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2535667072-9">[</span><span class="n">...</span><span class="p" data-group-id="2535667072-9">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2535667072-10">[</span><span class="n">...</span><span class="p" data-group-id="2535667072-10">]</span><span class="p" data-group-id="2535667072-4">}</span><span class="p">,</span><span class="w">
  </span><span class="ss">vk</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2535667072-11">{</span><span class="p" data-group-id="2535667072-12">[</span><span class="n">...</span><span class="p" data-group-id="2535667072-12">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2535667072-13">[</span><span class="n">...</span><span class="p" data-group-id="2535667072-13">]</span><span class="p" data-group-id="2535667072-11">}</span><span class="w">
</span><span class="p" data-group-id="2535667072-3">}</span><span class="w">
</span><span class="gp unselectable">iex(3)&gt; </span><span class="p" data-group-id="2535667072-14">{</span><span class="n">pk_rs</span><span class="p">,</span><span class="w"> </span><span class="bp">_</span><span class="p" data-group-id="2535667072-14">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">vk</span><span class="w"> </span><span class="c1"># Get the RS pub key from the CRS pub key</span><span class="w">
</span><span class="p" data-group-id="2535667072-15">{</span><span class="p" data-group-id="2535667072-16">[</span><span class="n">...</span><span class="p" data-group-id="2535667072-16">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2535667072-17">[</span><span class="n">...</span><span class="p" data-group-id="2535667072-17">]</span><span class="p" data-group-id="2535667072-15">}</span><span class="w">
</span><span class="gp unselectable">iex(4)&gt; </span><span class="n">ring</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">CryptoUtils</span><span class="o">.</span><span class="n">gen_ring</span><span class="p" data-group-id="2535667072-18">(</span><span class="n">ring_idx</span><span class="p">,</span><span class="w"> </span><span class="n">pk_rs</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p" data-group-id="2535667072-18">)</span><span class="w"> </span><span class="c1"># Generate a ring of size 3</span><span class="w">
</span><span class="p" data-group-id="2535667072-19">[</span><span class="p" data-group-id="2535667072-20">[</span><span class="n">...</span><span class="p" data-group-id="2535667072-20">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2535667072-21">[</span><span class="n">...</span><span class="p" data-group-id="2535667072-21">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2535667072-22">[</span><span class="n">...</span><span class="p" data-group-id="2535667072-22">]</span><span class="p" data-group-id="2535667072-19">]</span><span class="w">
</span><span class="gp unselectable">iex(5)&gt; </span><span class="p" data-group-id="2535667072-23">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">ring_sig</span><span class="p" data-group-id="2535667072-23">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">ClaimableRS</span><span class="o">.</span><span class="n">crs_sign</span><span class="p" data-group-id="2535667072-24">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">sk</span><span class="p">,</span><span class="w"> </span><span class="n">ring</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;Message to be signed&#39;</span><span class="p" data-group-id="2535667072-24">)</span><span class="w"> </span><span class="c1"># Sign message</span><span class="w">
</span><span class="p" data-group-id="2535667072-25">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2535667072-26">%</span><span class="nc" data-group-id="2535667072-26">SAG</span><span class="p" data-group-id="2535667072-26">{</span><span class="w">
   </span><span class="ss">chal</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2535667072-27">[</span><span class="n">...</span><span class="p" data-group-id="2535667072-27">]</span><span class="p">,</span><span class="w">
   </span><span class="ss">ring</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2535667072-28">[</span><span class="p" data-group-id="2535667072-29">[</span><span class="n">...</span><span class="p" data-group-id="2535667072-29">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2535667072-30">[</span><span class="n">...</span><span class="p" data-group-id="2535667072-30">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2535667072-31">[</span><span class="n">...</span><span class="p" data-group-id="2535667072-31">]</span><span class="p" data-group-id="2535667072-28">]</span><span class="p">,</span><span class="w">
   </span><span class="ss">resp</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2535667072-32">[</span><span class="p" data-group-id="2535667072-33">[</span><span class="n">...</span><span class="p" data-group-id="2535667072-33">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2535667072-34">[</span><span class="n">...</span><span class="p" data-group-id="2535667072-34">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2535667072-35">[</span><span class="n">...</span><span class="p" data-group-id="2535667072-35">]</span><span class="p" data-group-id="2535667072-32">]</span><span class="p">,</span><span class="w">
   </span><span class="ss">commitment</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2535667072-36">[</span><span class="n">...</span><span class="p" data-group-id="2535667072-36">]</span><span class="p">,</span><span class="w">
   </span><span class="ss">__uf__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2535667072-37">[</span><span class="p" data-group-id="2535667072-37">]</span><span class="w">
</span><span class="p" data-group-id="2535667072-26">}</span><span class="p" data-group-id="2535667072-25">}</span><span class="w">
</span><span class="gp unselectable">iex(6)&gt; </span><span class="nc">ClaimableRS</span><span class="o">.</span><span class="n">crs_vrfy</span><span class="p" data-group-id="2535667072-38">(</span><span class="n">ring_sig</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;Message to be signed&#39;</span><span class="p" data-group-id="2535667072-38">)</span><span class="w"> </span><span class="c1"># Verify signature</span><span class="w">
</span><span class="p" data-group-id="2535667072-39">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="2535667072-39">}</span><span class="w">
</span><span class="gp unselectable">iex(7)&gt; </span><span class="nc">ClaimableRS</span><span class="o">.</span><span class="n">crs_vrfy</span><span class="p" data-group-id="2535667072-40">(</span><span class="n">ring_sig</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;Different (invalid) message&#39;</span><span class="p" data-group-id="2535667072-40">)</span><span class="w">
</span><span class="p" data-group-id="2535667072-41">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="no">false</span><span class="p" data-group-id="2535667072-41">}</span><span class="w">
</span><span class="gp unselectable">iex(8)&gt; </span><span class="p" data-group-id="2535667072-42">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">claim</span><span class="p" data-group-id="2535667072-42">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">ClaimableRS</span><span class="o">.</span><span class="n">crs_claim</span><span class="p" data-group-id="2535667072-43">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">sk</span><span class="p">,</span><span class="w"> </span><span class="n">ring_sig</span><span class="p" data-group-id="2535667072-43">)</span><span class="w"> </span><span class="c1"># Generate claim</span><span class="w">
</span><span class="p" data-group-id="2535667072-44">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2535667072-45">{</span><span class="p" data-group-id="2535667072-46">[</span><span class="n">...</span><span class="p" data-group-id="2535667072-46">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2535667072-47">[</span><span class="n">...</span><span class="p" data-group-id="2535667072-47">]</span><span class="p" data-group-id="2535667072-45">}</span><span class="p" data-group-id="2535667072-44">}</span><span class="w">
</span><span class="gp unselectable">iex(9)&gt; </span><span class="nc">ClaimableRS</span><span class="o">.</span><span class="n">crs_vrfy_claim</span><span class="p" data-group-id="2535667072-48">(</span><span class="n">vk</span><span class="p">,</span><span class="w"> </span><span class="n">ring_sig</span><span class="p">,</span><span class="w"> </span><span class="n">claim</span><span class="p" data-group-id="2535667072-48">)</span><span class="w"> </span><span class="c1"># Verify claim</span><span class="w">
</span><span class="p" data-group-id="2535667072-49">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="2535667072-49">}</span></code></pre><hr class="thin"/><h4><strong><em>C_RSDAKE</em></strong></h4><p>The <code class="inline">C_RSDAKE</code> module contains functions for performing the RSDAKE key exchange protocol using claimable ring signature schemes. It provides 4 functions, representing each of the stages in the key exchange protocol. The functions are as follows:</p><ul><li><p><code class="inline">C_RSDAKE.initialise/1</code> - Generate the first message in the protocol. Expects as a single argument the identity of the sender as a charlist. If valid, it returns {:ok, {crypto_state, msg}} where crypto_state is a struct containing all crypto structs needed for future stages of the exchange and msg is the message to be sent to the receiver. If invalid (argument type error), it returns {:error, :invalid_identity}.</p></li><li><p><code class="inline">C_RSDAKE.respond/3</code> - Generate a response to the first message of the exchange. Expects as arguments the identity of the receiver, long-term claimable ring signature key pair and the initial exchange message. If successful, it returns {:ok, {crypto_state, msg}} where crypto_state is a struct containing all crypto structs needed for future stages of the exchange and msg is the response to be sent to the receiver. If invalid (argument error), it returns {:error, atom}, where atom includes information for the error type.</p></li><li><p><code class="inline">C_RSDAKE.finalise/3</code> - Generate the final message of the exchange. Expects as arguments the identity of the sender, crypto_struct generated by the <code class="inline">C_RSDAKE.initialise/1</code> function and the response from the second stage of the exchange. If successful, it returns {:ok, {crypto_state, msg}} where crypto_state is a struct containing all crypto structs needed for future stages of the exchange and msg is the final message to be sent to the receiver. If invalid (argument error), it returns {:error, atom}, where atom includes information for the error type.</p></li><li><p><code class="inline">C_RSDAKE.verify_final/3</code> - Verify the final message of the exchange. Expects as arguments the identity of the receiver, crypto_struct generated by the <code class="inline">C_RSDAKE.initialise/1</code> function and the final message from the third stage of the exchange. If successful, it returns {:ok, boolean} where the boolean indicates the validity of the final message. If invalid (argument error), it returns {:error, atom}, where atom includes information for the error type.</p></li></ul><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex(1)&gt; </span><span class="n">init_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sc">&#39;INITIATOR_IDENTITY&#39;</span><span class="w"> </span><span class="c1"># The identity of the initiator</span><span class="w">
</span><span class="sc">&#39;INITIATOR_IDENTITY&#39;</span><span class="w">
</span><span class="gp unselectable">iex(2)&gt; </span><span class="n">recv_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sc">&#39;RECEPIENT_IDENTITY&#39;</span><span class="w"> </span><span class="c1"># The identity of the recepient</span><span class="w">
</span><span class="sc">&#39;RECEPIENT_IDENTITY&#39;</span><span class="w">
</span><span class="gp unselectable">iex(3)&gt; </span><span class="p" data-group-id="2254635022-1">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2254635022-2">{</span><span class="n">init_struct</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2254635022-3">{</span><span class="bp">_</span><span class="p">,</span><span class="w"> </span><span class="n">init_msg</span><span class="p" data-group-id="2254635022-3">}</span><span class="p" data-group-id="2254635022-2">}</span><span class="p" data-group-id="2254635022-1">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">C_RSDAKE</span><span class="o">.</span><span class="n">initialise</span><span class="p" data-group-id="2254635022-4">(</span><span class="n">init_id</span><span class="p" data-group-id="2254635022-4">)</span><span class="w">
</span><span class="c1"># Long structure omitted</span><span class="w">
</span><span class="gp unselectable">iex(4)&gt; </span><span class="n">lt_keys</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">ClaimableRS</span><span class="o">.</span><span class="n">crs_gen</span><span class="p" data-group-id="2254635022-5">(</span><span class="p" data-group-id="2254635022-5">)</span><span class="w"> </span><span class="c1"># Generate long-term CRS keys for responder</span><span class="w">
</span><span class="p" data-group-id="2254635022-6">%{</span><span class="w">
  </span><span class="ss">sk</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2254635022-7">{</span><span class="p" data-group-id="2254635022-8">{</span><span class="p" data-group-id="2254635022-9">[</span><span class="n">...</span><span class="p" data-group-id="2254635022-9">]</span><span class="p" data-group-id="2254635022-8">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2254635022-10">[</span><span class="n">...</span><span class="p" data-group-id="2254635022-10">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2254635022-11">[</span><span class="n">...</span><span class="p" data-group-id="2254635022-11">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2254635022-12">[</span><span class="n">...</span><span class="p" data-group-id="2254635022-12">]</span><span class="p" data-group-id="2254635022-7">}</span><span class="p">,</span><span class="w">
  </span><span class="ss">vk</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2254635022-13">{</span><span class="p" data-group-id="2254635022-14">[</span><span class="n">...</span><span class="p" data-group-id="2254635022-14">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2254635022-15">[</span><span class="n">...</span><span class="p" data-group-id="2254635022-15">]</span><span class="p" data-group-id="2254635022-13">}</span><span class="w">
</span><span class="p" data-group-id="2254635022-6">}</span><span class="w">
</span><span class="gp unselectable">iex(5)&gt; </span><span class="p" data-group-id="2254635022-16">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2254635022-17">{</span><span class="n">resp_struct</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2254635022-18">{</span><span class="bp">_</span><span class="p">,</span><span class="w"> </span><span class="n">resp_msg</span><span class="p" data-group-id="2254635022-18">}</span><span class="p" data-group-id="2254635022-17">}</span><span class="p" data-group-id="2254635022-16">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">C_RSDAKE</span><span class="o">.</span><span class="n">respond</span><span class="p" data-group-id="2254635022-19">(</span><span class="n">recv_id</span><span class="p">,</span><span class="w"> </span><span class="n">lt_keys</span><span class="p">,</span><span class="w"> </span><span class="n">init_msg</span><span class="p" data-group-id="2254635022-19">)</span><span class="w">
</span><span class="c1"># Long structure omitted</span><span class="w">
</span><span class="gp unselectable">iex(6)&gt; </span><span class="p" data-group-id="2254635022-20">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2254635022-21">{</span><span class="n">fin_struct</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2254635022-22">{</span><span class="bp">_</span><span class="p">,</span><span class="w"> </span><span class="n">fin_msg</span><span class="p" data-group-id="2254635022-22">}</span><span class="p" data-group-id="2254635022-21">}</span><span class="p" data-group-id="2254635022-20">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">C_RSDAKE</span><span class="o">.</span><span class="n">finalise</span><span class="p" data-group-id="2254635022-23">(</span><span class="n">init_id</span><span class="p">,</span><span class="w"> </span><span class="n">init_struct</span><span class="p">,</span><span class="w"> </span><span class="n">resp_msg</span><span class="p" data-group-id="2254635022-23">)</span><span class="w">
</span><span class="c1"># Long structure omitted</span><span class="w">
</span><span class="gp unselectable">iex(7)&gt; </span><span class="nc">C_RSDAKE</span><span class="o">.</span><span class="n">verify_final</span><span class="p" data-group-id="2254635022-24">(</span><span class="n">recv_id</span><span class="p">,</span><span class="w"> </span><span class="n">resp_struct</span><span class="p">,</span><span class="w"> </span><span class="n">fin_msg</span><span class="p" data-group-id="2254635022-24">)</span><span class="w">
</span><span class="p" data-group-id="2254635022-25">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="2254635022-25">}</span><span class="w">
</span><span class="gp unselectable">iex(8)&gt; </span><span class="n">resp_struct</span><span class="o">.</span><span class="n">shared_secret</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">fin_struct</span><span class="o">.</span><span class="n">shared_secret</span><span class="w"> </span><span class="c1"># Check that the shared secret is the same for both parties</span><span class="w">
</span><span class="no">true</span><span class="w">
</span><span class="gp unselectable">iex(9)&gt; </span><span class="n">resp_struct</span><span class="o">.</span><span class="n">shared_secret</span><span class="w"> </span><span class="c1"># The shared secret (responder)</span><span class="w">
</span><span class="p" data-group-id="2254635022-26">&lt;&lt;</span><span class="n">...</span><span class="p" data-group-id="2254635022-26">&gt;&gt;</span></code></pre><p>This concludes the cryptographic module tests. Below are example tests for the information dispersal modules (Rabin's IDA and Security Enhanced IDA).</p><hr class="thin"/><h4><strong><em>RabinIDA</em></strong></h4><p>This is an implementation of Rabin's Information Dispersal Algorithm. It provides 4 functions, two of which are used for splitting and reconstructing data and the other two are only used for encoding/decoding the data output for serialisation and will not be described here. To improve performance, this module calls a C NIF to perform matrix multiplication operations.
The available functions are:</p><ul><li><p><code class="inline">RabinIDA.split/3</code> - Split a binary into n shares. Expects as arguments the binary to be split, the number of shares to be generated (n) and the size of each share, which is also the reconstruction threshold. Returns a list of maps with the data and index of each share (accessible via the :data, :idx keys respectively).</p></li><li><p><code class="inline">RabinIDA.reconstruct/1</code> - Attempt to reconstruct the original data from the a list of maps generated by the <code class="inline">RabinIDA.split/3</code> function. If successful, it returns {:ok, binary} where binary is the original data. If unsuccessful, it returns {:error, nil}.</p></li></ul><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex(1)&gt; </span><span class="n">shares</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">RabinIDA</span><span class="o">.</span><span class="n">split</span><span class="p" data-group-id="4743280152-1">(</span><span class="s">&quot;This will be split into 4 shares&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p" data-group-id="4743280152-1">)</span><span class="w">
</span><span class="p" data-group-id="4743280152-2">[</span><span class="w">
  </span><span class="p" data-group-id="4743280152-3">%{</span><span class="w">
    </span><span class="ss">data</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4743280152-4">&lt;&lt;</span><span class="n">...</span><span class="p" data-group-id="4743280152-4">&gt;&gt;</span><span class="p">,</span><span class="w">
    </span><span class="ss">share_idx</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
  </span><span class="p" data-group-id="4743280152-3">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4743280152-5">%{</span><span class="w">
    </span><span class="ss">data</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4743280152-6">&lt;&lt;</span><span class="n">...</span><span class="p" data-group-id="4743280152-6">&gt;&gt;</span><span class="p">,</span><span class="w">
    </span><span class="ss">share_idx</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
  </span><span class="p" data-group-id="4743280152-5">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4743280152-7">%{</span><span class="w">
    </span><span class="ss">data</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4743280152-8">&lt;&lt;</span><span class="n">...</span><span class="p" data-group-id="4743280152-8">&gt;&gt;</span><span class="p">,</span><span class="w">
    </span><span class="ss">share_idx</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
  </span><span class="p" data-group-id="4743280152-7">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4743280152-9">%{</span><span class="w">
    </span><span class="ss">data</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4743280152-10">&lt;&lt;</span><span class="n">...</span><span class="p" data-group-id="4743280152-10">&gt;&gt;</span><span class="p">,</span><span class="w">
    </span><span class="ss">share_idx</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="w">
  </span><span class="p" data-group-id="4743280152-9">}</span><span class="w">
</span><span class="p" data-group-id="4743280152-2">]</span><span class="w">
</span><span class="gp unselectable">iex(2)&gt; </span><span class="nc">RabinIDA</span><span class="o">.</span><span class="n">reconstruct</span><span class="p" data-group-id="4743280152-11">(</span><span class="n">shares</span><span class="p" data-group-id="4743280152-11">)</span><span class="w">
</span><span class="p" data-group-id="4743280152-12">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;This will be split into 4 shares&quot;</span><span class="p" data-group-id="4743280152-12">}</span><span class="w">
</span><span class="gp unselectable">iex(3)&gt; </span><span class="n">new_shares</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">RabinIDA</span><span class="o">.</span><span class="n">split</span><span class="p" data-group-id="4743280152-13">(</span><span class="s">&quot;This will be split into 4 shares with threshold 2&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="4743280152-13">)</span><span class="w">
</span><span class="gp unselectable">iex(3)&gt; </span><span class="n">rand_shares</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">take_random</span><span class="p" data-group-id="4743280152-14">(</span><span class="n">new_shares</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="4743280152-14">)</span><span class="w"> </span><span class="c1"># Take 2 random shares out of the 4</span><span class="w">
</span><span class="p" data-group-id="4743280152-15">[</span><span class="w">
  </span><span class="p" data-group-id="4743280152-16">%{</span><span class="w">
    </span><span class="ss">data</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4743280152-17">&lt;&lt;</span><span class="n">...</span><span class="p" data-group-id="4743280152-17">&gt;&gt;</span><span class="p">,</span><span class="w">
    </span><span class="ss">share_idx</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
  </span><span class="p" data-group-id="4743280152-16">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4743280152-18">%{</span><span class="w">
    </span><span class="ss">data</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4743280152-19">&lt;&lt;</span><span class="n">...</span><span class="p" data-group-id="4743280152-19">&gt;&gt;</span><span class="p">,</span><span class="w">
    </span><span class="ss">share_idx</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
  </span><span class="p" data-group-id="4743280152-18">}</span><span class="w">
</span><span class="p" data-group-id="4743280152-15">]</span><span class="w">
</span><span class="gp unselectable">iex(4)&gt; </span><span class="nc">RabinIDA</span><span class="o">.</span><span class="n">reconstruct</span><span class="p" data-group-id="4743280152-20">(</span><span class="n">rand_shares</span><span class="p" data-group-id="4743280152-20">)</span><span class="w">
</span><span class="p" data-group-id="4743280152-21">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;This will be split into 4 shares with threshold 2&quot;</span><span class="p" data-group-id="4743280152-21">}</span></code></pre><blockquote><p><strong>Note:</strong> The reconstruction will only work if the number of shares passed to it is equal to the reconstruction threshold. The example above shows how a random number of items from a list can be taken using <a href="https://hexdocs.pm/elixir/Enum.html#take_random/2"><code class="inline">Enum.take_random/2</code></a>.</p></blockquote><hr class="thin"/><h4><strong><em>SecureIDA</em></strong></h4><p>This module is an implementation of a security enhanced information dispersal algorithm. Overall its usage is almost identical to RabinIDA, with the exception that it returns more complicated structs and handles errors better. It works by encrypting the data with AES256-CBC using a random key and IV, splitting the data into shares using RabinIDA and splitting the key intro shares using Shamir's Secret Sharing Scheme, then adding a part of each to a message. The available functions are:</p><ul><li><p><code class="inline">SecureIDA.disperse/4</code> - Disperse a binary into shares. Expects as input the binary to be split, the number of shares to be generated (n), the share size (reconstruction threshold) m, and the integer message ID (used to identify shares of the same message). Returns a list of share stricts.</p></li><li><p><code class="inline">SecureIDA.reconstruct/1</code> - Attempt to reconstruct the original data from a list of share structs generated by the <code class="inline">SecureIDA.disperse/4</code> function. Unlike RabinIDA, this function handles being given more messages than the recontruction threshold. If successful, it returns {:ok, binary} where binary is the original data. If unsuccessful, it returns {:error, string}, where the string contains an error message.</p></li></ul><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex(1)&gt; </span><span class="n">shares</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">SecureIDA</span><span class="o">.</span><span class="n">disperse</span><span class="p" data-group-id="2596686145-1">(</span><span class="s">&quot;A secure dispersal message&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">1234567</span><span class="p" data-group-id="2596686145-1">)</span><span class="w">
</span><span class="p" data-group-id="2596686145-2">[</span><span class="w">
  </span><span class="p" data-group-id="2596686145-3">%</span><span class="nc" data-group-id="2596686145-3">Share</span><span class="p" data-group-id="2596686145-3">{</span><span class="w">
    </span><span class="ss">message_id</span><span class="p">:</span><span class="w"> </span><span class="mi">1234567</span><span class="p">,</span><span class="w">
    </span><span class="ss">total_shares</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
    </span><span class="ss">share_idx</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="ss">share_threshold</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="ss">key_share</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2596686145-4">%</span><span class="nc" data-group-id="2596686145-4">KeyShare</span><span class="p" data-group-id="2596686145-4">{</span><span class="w">
      </span><span class="ss">aes_key</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2596686145-5">&lt;&lt;</span><span class="n">...</span><span class="p" data-group-id="2596686145-5">&gt;&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">iv</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2596686145-6">&lt;&lt;</span><span class="n">...</span><span class="p" data-group-id="2596686145-6">&gt;&gt;</span><span class="w">
    </span><span class="p" data-group-id="2596686145-4">}</span><span class="p">,</span><span class="w">
    </span><span class="ss">data</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2596686145-7">&lt;&lt;</span><span class="n">...</span><span class="p" data-group-id="2596686145-7">&gt;&gt;</span><span class="w">
  </span><span class="p" data-group-id="2596686145-3">}</span><span class="p">,</span><span class="w">
  </span><span class="n">...</span><span class="w">
</span><span class="p" data-group-id="2596686145-2">]</span><span class="w">
</span><span class="gp unselectable">iex(2)&gt; </span><span class="nc">SecureIDA</span><span class="o">.</span><span class="n">reconstruct</span><span class="p" data-group-id="2596686145-8">(</span><span class="n">shares</span><span class="p" data-group-id="2596686145-8">)</span><span class="w">
</span><span class="p" data-group-id="2596686145-9">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;A secure dispersal message&quot;</span><span class="p" data-group-id="2596686145-9">}</span></code></pre><hr class="thin"/><h3 id="fileio-services" class="section-heading">
  <a href="#fileio-services" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">fileio-services</p>
  </a>
  <strong>FileIO (Services)</strong>
</h3>
<p>The FileIO service is a simple file transfer service which allows users to test out the functionality of the LAP2 network. It is not recommended to be run outside of a docker contained as it has access to the entire filesystem and will happily read and write to any file if instructed to do so and the program has the correct permissions. It cannot be used by itself since it requires on an instance of the LAP2 network node to be running. The following functions are available:</p><ul><li><p><code class="inline">FileIO.run_service/1</code> - Starts the FileIO service. Expects as input the name of the master GenServer process, however it is advisable to call it using <code class="inline">NetUtils.run_fileio/1</code>, which expects the network address of the host node and resolves the master process name automatically. This function will return {:ok, service_id} if successful, where service_id is the name of the service process. If unsuccessful, it will return {:error, reason}.</p></li><li><p><code class="inline">FileIO.request_file/5</code> - Requests a file from an introduction point in the network and writes it to the filesystem. Expects a list of network addresses of the introduction points to use, the name of the remote service process, the name of the remote file, the save location on the local filesystem and the name of the local FileIO service process. The function will return :ok or :error based on the initial attempt to send the requests and then write to the filesystem if the retrieval was successful.</p></li><li><p><code class="inline">FileIO.stop_service/1</code> - Stops the FileIO service. Expects as input the name of the service process, which is returned by <code class="inline">FileIO.run_service/1</code>. This function will return :ok if successful, or {:error, reason} if unsuccessful.</p></li></ul><blockquote><p><strong>Note:</strong> The FileIO service is not designed to be used by itself. Code examples can be found in the <a href="#file-transfer-example">File Transfer Example</a>.</p></blockquote><hr class="thin"/><h2 id="task-list" class="section-heading">
  <a href="#task-list" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">task-list</p>
  </a>
  <strong>Task List</strong>
</h2>
<p>The following tasks are planned for the LAP2 project:</p><h3 id="general" class="section-heading">
  <a href="#general" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">general</p>
  </a>
  <strong>General</strong>
</h3>
<ul><li>[x] Unit testing</li><li>[x] Docker build</li><li>[x] Error logging</li><li>[x] Command Line Interface</li><li>[x] Configuration file parsing</li></ul><h3 id="networking-1" class="section-heading">
  <a href="#networking-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">networking-1</p>
  </a>
  <strong>Networking</strong>
</h3>
<ul><li>[x] Efficient UDP datagram buffering and handling</li><li>[x] UDP socket wrapper</li><li>[x] TCP socket wrapper</li><li>[x] ProtoBuff serialisation/deserialisation</li><li>[x] Peer connection and discovery</li><li>[x] Distributed hash table</li><li>[x] Clove storage and relay</li><li>[x] Introduction Points</li><li>[x] Proxy routing</li><li>[x] Connection supervisor module</li></ul><h3 id="garlic-cast-1" class="section-heading">
  <a href="#garlic-cast-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">garlic-cast-1</p>
  </a>
  <strong>Garlic Cast</strong>
</h3>
<ul><li>[x] Rabin's IDA</li><li>[x] Security Enhanced IDA</li><li>[x] Proxy discovery</li></ul><h3 id="crypto" class="section-heading">
  <a href="#crypto" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">crypto</p>
  </a>
  <strong>Crypto</strong>
</h3>
<ul><li>[x] Cryptographic primitives NIF</li><li>[x] Claimable Ring Signature scheme</li><li>[x] RSDAKE</li><li>[x] RSDAKE - Claimability</li><li>[x] Key exchange</li></ul><h3 id="math" class="section-heading">
  <a href="#math" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">math</p>
  </a>
  <strong>Math</strong>
</h3>
<ul><li>[x] Matrix module</li><li>[x] Matrix NIF</li></ul><h3 id="bonus" class="section-heading">
  <a href="#bonus" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">bonus</p>
  </a>
  <strong>Bonus</strong>
</h3>
<ul><li>[ ] Add function argument descriptions to docs</li><li>[ ] Add proxy heartbeat</li><li>[ ] Refactor registry_table as ETS</li><li>[ ] Sybil guard</li><li>[ ] Rewrite matrix NIF module in Rust</li><li>[ ] Contribution verification</li><li>[ ] Removing bad nodes</li><li>[ ] Phoenix frontend</li></ul>
<div class="bottom-actions">
  <div class="bottom-actions-item">

      <a href="api-reference.html" class="bottom-actions-button" rel="prev">
        <span class="subheader">
          ← Previous Page
        </span>
        <span class="title">
API Reference
        </span>
      </a>

  </div>
  <div class="bottom-actions-item">

  </div>
</div>
      <footer class="footer">
        <p>

          <span class="line">
            <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
              Search HexDocs
            </button>

              <a href="LAP2.epub" title="ePub version">
                Download ePub version
              </a>

          </span>
        </p>

        <p class="built-using">
          Built using
          <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.29.4) for the

            <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>

        </p>
      </footer>
    </div>
  </div>
</section>
</div>


  </body>
</html>
